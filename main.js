(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.d({},{hi:()=>ye,fT:()=>ve,lH:()=>me,eY:()=>be});var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers}var n,r;return n=e,(r=[{key:"_check",value:function(e){return e.ok?e.json():Promise.reject("Извините произошла ошибка")}},{key:"getUserData",value:function(){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then(this._check)}},{key:"getAllCard",value:function(){return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then(this._check)}},{key:"postNewCard",value:function(e){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._check)}},{key:"patchDataUser",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._check)}},{key:"patchAvatarUser",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then(this._check)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._check)}},{key:"likeCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e._id,"/likes"),{method:"PUT",headers:this._headers,body:JSON.stringify(e)}).then(this._check)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e._id,"/likes"),{method:"DELETE",headers:this._headers}).then(this._check)}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=[],this._renderer=t,this._selector=n}var t,n;return t=e,(n=[{key:"setItems",value:function(e){this._items=e}},{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){return e._renderer(t)}))}},{key:"addItems",value:function(e){this._selector.append(e)}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r._inactiveSubmitButton():r._activeSubmitButton()})),c(this,"resetValidation",(function(){r._toggleButtonState(),r._inputList.forEach((function(e){r._hideInputError(e)}))})),this._listSelector=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._listSelector.inputSelector)),this._submitButton=this._formElement.querySelector(this._listSelector.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){this._inputError=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.add(this._listSelector.inputErrorClass),this._inputError.textContent=t}},{key:"_hideInputError",value:function(e){this._inputError=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.remove(this._listSelector.inputErrorClass),this._inputError.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_inactiveSubmitButton",value:function(){this._submitButton.classList.add(this._listSelector.inactiveButtonClass),this._submitButton.setAttribute("disabled","disabled")}},{key:"_activeSubmitButton",value:function(){this._submitButton.classList.remove(this._listSelector.inactiveButtonClass),this._submitButton.removeAttribute("disabled")}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonState(t)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_closeByClick",(function(e){e.target.closest(".popup-content")||n.close()})),l(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),this._popupSelector=t,this._closeButton=this._popupSelector.querySelector(".popup__close-button")}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupSelector.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._closeButton.addEventListener("click",(function(){e.close()})),this._popupSelector.addEventListener("click",this._closeByClick)}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=d(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},h.apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function _(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(r);if(o){var n=b(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _(this,e)});function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,e)}return t=c,(n=[{key:"open",value:function(e){h(b(c.prototype),"open",this).call(this),c.fullScrin.src=e.link,c.fullScrin.alt=e.name,c.fullScrinTitle.textContent=e.name}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(s);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=S(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},w.apply(this,arguments)}function S(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function O(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}v(m,"fullScrin",document.querySelector(".popup__max-img")),v(m,"fullScrinTitle",document.querySelector(".popup__max-img-title"));var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e))._submitFormСolback=t,n._textButton=n._popupSelector.querySelector(".submit-button"),n._textButtonDefault=n._textButton.textContent,n._formElement=n._popupSelector.querySelector(".form"),n._inputList=Array.from(n._formElement.querySelectorAll(".form__input")),n}return t=c,(n=[{key:"_getInputValues",value:function(){var e=this;return this.valueList={},this._inputList.forEach((function(t){e.valueList[t.name]=t.value})),this.valueList}},{key:"showDownloadMessage",value:function(e){this._textButton.innerText=e?"Сохранение...":this._textButtonDefault}},{key:"setEventListeners",value:function(){var e=this;w(E(c.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault();var n=e._getInputValues();e.showDownloadMessage(!0),e._submitFormСolback(n)}))}},{key:"close",value:function(){w(E(c.prototype),"close",this).call(this),this._formElement.reset()}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(s);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P,B,q,D=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nickName=document.querySelector(t),this._aboutMe=document.querySelector(n),this._userInfo={}}var t,n;return t=e,(n=[{key:"setUserInfo",value:function(t){this._nickName.textContent=t.name,this._aboutMe.textContent=t.about,e.avatar.src=t.avatar,this._userInfo=t}},{key:"getUserInfo",value:function(){return this._userInfo}},{key:"getIdUser",value:function(){return this._userInfo._id}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=x(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},T.apply(this,arguments)}function x(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M(e)););return e}function U(e,t){return U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},U(e,t)}function A(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return V(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}P=D,B="avatar",q=document.querySelector(".profile__avatar"),B in P?Object.defineProperty(P,B,{value:q,enumerable:!0,configurable:!0,writable:!0}):P[B]=q;var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(r);if(o){var n=M(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return A(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(V(n=i.call(this,e)),"deleteCard",(function(){n._dataCard.cloneCard.remove(),n._dataCard.cloneCard=null})),n._dataCard={},n._colbackDeleteCard=t,n._textButton=n._popupSelector.querySelector(".submit-button"),n._textButtonDefault=n._textButton.textContent,n._closeButton=n._popupSelector.querySelector(".popup__close-button"),n._formElement=n._popupSelector.querySelector(".form"),n}return t=c,(n=[{key:"open",value:function(e){return this._dataCard={id:e.id,cloneCard:e.cloneCard},T(M(c.prototype),"open",this).call(this),this._dataCard}},{key:"showDownloadMessage",value:function(e){this._textButton.innerText=e?"Сохранение...":this._textButtonDefault}},{key:"setEventListeners",value:function(){var e=this;T(M(c.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e.showDownloadMessage(!0),e._colbackDeleteCard(e._dataCard.id)}))}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(s);function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var H=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._idUser=n,this._data=t,this._handleCardClick=r,this._colbackLikeActive=o,this._colbackLikeDelete=i,this._cloneCard=e._templateCard.querySelector(".card").cloneNode(!0),this._plaseImg=this._cloneCard.querySelector(".card__image"),this._likeButton=this._cloneCard.querySelector(".card__like-button"),this._placeTitle=this._cloneCard.querySelector(".card__title"),this._cardLikeCounter=this._cloneCard.querySelector(".card__like-counter")}var t,n;return t=e,(n=[{key:"_test",value:function(){var e=this;return this._data.likes.some((function(t){return t._id===e._idUser}))}},{key:"checkLikeStatus",value:function(){this._test()&&this._addlike()}},{key:"checkLikeCounter",value:function(e){this._cardLikeCounter.textContent=e.likes.length}},{key:"chengeDataLikeCounter",value:function(e){this._data.likes=e.likes}},{key:"createCard",value:function(){return this._plaseImg.src=this._data.link,this._plaseImg.alt=this._data.name,this._placeTitle.textContent=this._data.name,this._setEventListeners(),this._cloneCard}},{key:"_setEventListeners",value:function(){var e=this;this._plaseImg.addEventListener("click",(function(){e._handleCardClick()})),this._likeButton.addEventListener("click",(function(){e._test()?(e._colbackLikeDelete(e._data),e._toggleLike()):(e._colbackLikeActive(e._data),e._toggleLike())}))}},{key:"_addlike",value:function(){this._likeButton.classList.add("card__like-button_active")}},{key:"_toggleLike",value:function(){this._likeButton.classList.toggle("card__like-button_active"),this.checkLikeCounter}}])&&J(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(){return z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Y(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},z.apply(this,arguments)}function Y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}function K(e,t){return K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},K(e,t)}function Q(e,t){if(t&&("object"===F(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(H,"_templateCard",document.querySelector("#template-card").content);var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=W(r);if(o){var n=W(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Q(this,e)});function c(e,t,n,r,o,u){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(a=i.call(this,e,t,n,r,o))._colbackDeleteCard=u,a._cloneCard=c._templateCard.querySelector(".card").cloneNode(!0),a._placeTitle=a._cloneCard.querySelector(".card__title"),a._plaseImg=a._cloneCard.querySelector(".card__image"),a._likeButton=a._cloneCard.querySelector(".card__like-button"),a._cardLikeCounter=a._cloneCard.querySelector(".card__like-counter"),a._deleteButton=a._cloneCard.querySelector(".card__delete-button"),a}return t=c,(n=[{key:"_setEventListeners",value:function(){var e=this;z(W(c.prototype),"_setEventListeners",this).call(this),this._deleteButton.addEventListener("click",(function(){e._colbackDeleteCard({id:e._data._id,cloneCard:e._cloneCard})}))}}])&&G(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(H);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(X,"_templateCard",document.querySelector("#template-userCard").content);var Z={inputSelector:".form__input",submitButtonSelector:".submit-button",inactiveButtonClass:"form__submit_inactive",inputErrorClass:"form__input_type_error"},$=document.querySelector("#avatar"),ee=document.querySelector("#profile"),te=document.querySelector("#create-card"),ne=document.querySelector("#delete-card"),re=document.querySelector(".popup_type_max-img"),oe=document.querySelector("#avatar-input"),ie=document.querySelector("#about-input"),ce=document.querySelector("#name-input"),ue=document.querySelector(".profile__add-photo"),ae=document.querySelector(".profile__edit-avatar"),le=document.querySelector(".profile__edit"),se=document.querySelector("#form-create"),fe=document.querySelector("#profile-edit"),pe=document.querySelector("#cheng-avatar"),he=document.querySelector("#card-list");function de(e){var t=be.getIdUser();if(e.owner._id===t){var n=new X(e,t,(function(){return me.open(e)}),(function(e){ye.likeCard(e).then((function(e){n.chengeDataLikeCounter(e),n.checkLikeCounter(e)})).catch((function(e){return console.log(e)}))}),(function(e){ye.deleteLike(e).then((function(e){n.chengeDataLikeCounter(e),n.checkLikeCounter(e)})).catch((function(e){return console.log(e)}))}),(function(e){ve.open(e)}));return n.checkLikeStatus(),n.checkLikeCounter(e),n.createCard()}var r=new H(e,t,(function(){return me.open(e)}),(function(e){ye.likeCard(e).then((function(e){r.chengeDataLikeCounter(e),r.checkLikeCounter(e)})).catch((function(e){return console.log(e)}))}),(function(e){ye.deleteLike(e).then((function(e){r.chengeDataLikeCounter(e),r.checkLikeCounter(e)})).catch((function(e){return console.log(e)}))}));return r.checkLikeStatus(),r.checkLikeCounter(e),r.createCard()}var ye=new n({url:"https://mesto.nomoreparties.co/v1/cohort-41",headers:{authorization:"9f932bbc-acd7-4dae-8249-c98552659f56","content-type":"application/json"}}),_e=new o((function(e){return _e.addItems(de(e))}),he),be=new D(".profile__nick-name",".profile__profession"),ve=new N(ne,(function(e){ye.deleteCard(e).then((function(e){ve.deleteCard(),_e.setItems(e),ve.close()})).catch((function(e){return console.log(e)})).finally((function(){return ve.showDownloadMessage(!1)}))})),me=new m(re),ke=new u(Z,pe),ge=new u(Z,fe),we=new u(Z,se),Se=new L(ee,(function(e){ye.patchDataUser(e).then((function(e){be.getUserInfo(),be.setUserInfo(e),Se.close()})).catch((function(e){return console.log(e)})).finally((function(){return Se.showDownloadMessage(!1)}))})),Ce=new L(te,(function(e){ye.postNewCard(e).then((function(e){!function(e){he.prepend(de(e))}(e),Ce.close()})).catch((function(e){return console.log(e)})).finally((function(){return Ce.showDownloadMessage(!1)}))})),Oe=new L($,(function(e){ye.patchAvatarUser(e).then((function(e){be.getUserInfo(),be.setUserInfo(e),Oe.close()})).catch((function(e){console.log(e)})).finally((function(){return Oe.shshowDownloadMessage(!1)}))}));ke.enableValidation(),ge.enableValidation(),we.enableValidation(),ue.addEventListener("click",(function(){Ce.open(),we.resetValidation()})),le.addEventListener("click",(function(){var e=be.getUserInfo();ce.value=e.name,ie.value=e.about,Se.open(),ge.resetValidation()})),ae.addEventListener("click",(function(){var e=be.getUserInfo();oe.value=e.avatar,Oe.open(),ke.resetValidation()})),ve.setEventListeners(),me.setEventListeners(),Se.setEventListeners(),Oe.setEventListeners(),Ce.setEventListeners(),ye.getAllCard().then((function(e){_e.setItems(e),_e.renderItems()})).catch((function(e){console.log(e)})),ye.getUserData().then((function(e){be.setUserInfo(e)})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bEQsTUFBUWpGLEVBQUtNLE9BQ3pCMEssR0FBa0I3QixPQUNsQmtCLEdBQWdCZSxxQkFHbEJ4QixHQUFZeUIsb0JBQ1puQyxHQUFlbUMsb0JBQ2ZiLEdBQWlCYSxvQkFDakJMLEdBQWtCSyxvQkFDbEJULEdBQW9CUyxvQkFFcEJqQyxHQUFJa0MsYUFDRHhMLE1BQUssU0FBQ1AsR0FDTHlLLEdBQVFHLFNBQVM1SyxHQUNqQnlLLEdBQVF1QixpQkFFVGhDLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsTUFHaEJKLEdBQUlvQyxjQUNEMUwsTUFBSyxTQUFDUCxHQUNMdUosR0FBUzZCLFlBQVlwTCxNQUV0QmdLLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsTyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21lc3RvL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwRGVsZXRlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VyQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbnN0YW50cy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgICAgICB0aGlzLl91cmwgPSBjb25maWcudXJsO1xyXG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSBjb25maWcuaGVhZGVycztcclxuICAgIH1cclxuICAgIF9jaGVjayhyZXMpe1xyXG4gICAgICAgIGlmKHJlcy5vayl7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCfQmNC30LLQuNC90LjRgtC1INC/0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAnKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldFVzZXJEYXRhKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2spO1xyXG4gICAgfVxyXG4gICAgZ2V0QWxsQ2FyZCgpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICB9KS50aGVuKHRoaXMuX2NoZWNrKTtcclxuICAgIH1cclxuICAgIHBvc3ROZXdDYXJkKGRhdGEpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgICAgICB9KS50aGVuKHRoaXMuX2NoZWNrKTtcclxuICAgIH1cclxuICAgIHBhdGNoRGF0YVVzZXIoZGF0YSl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KS50aGVuKHRoaXMuX2NoZWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXRjaEF2YXRhclVzZXIoZGF0YSl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KS50aGVuKHRoaXMuX2NoZWNrKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZGVsZXRlQ2FyZChpZCl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtpZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgfSkudGhlbih0aGlzLl9jaGVjayk7XHJcbiAgICB9XHJcblxyXG4gICAgbGlrZUNhcmQoZGF0YSl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtkYXRhLl9pZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXHJcbiAgICAgICAgfSkudGhlbih0aGlzLl9jaGVjayk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlTGlrZShkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtkYXRhLl9pZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgfSkudGhlbih0aGlzLl9jaGVjayk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3RvciAocmVuZGVyZXIsIGNvbnRhaW5lclNlbGVjdG9yKXtcclxuICAgIHRoaXMuX2l0ZW1zID0gW107XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fc2VsZWN0b3IgPSBjb250YWluZXJTZWxlY3RvcjtcclxuICB9O1xyXG5zZXRJdGVtcyhkYXRhKXtcclxuICB0aGlzLl9pdGVtcyA9IGRhdGFcclxufVxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoZWwpID0+IHRoaXMuX3JlbmRlcmVyKGVsKSk7XHJcbiAgfTtcclxuXHJcbiAgYWRkSXRlbXMoZWwpIHtcclxuICAgIHRoaXMuX3NlbGVjdG9yLmFwcGVuZChlbClcclxuICB9O1xyXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGxpc3RTZWxlY3RvciwgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2xpc3RTZWxlY3RvciA9IGxpc3RTZWxlY3RvclxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudFxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2xpc3RTZWxlY3Rvci5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2xpc3RTZWxlY3Rvci5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfTtcclxuICBfaXNWYWxpZCAoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgX3Nob3dJbnB1dEVycm9yIChpbnB1dEVsZW1lbnQsIGVycm9yTWFzYWdlKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fbGlzdFNlbGVjdG9yLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yLnRleHRDb250ZW50ID0gZXJyb3JNYXNhZ2U7XHJcbiAgfTtcclxuICBfaGlkZUlucHV0RXJyb3IgKGlucHV0RWxlbWVudCl7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fbGlzdFNlbGVjdG9yLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yLnRleHRDb250ZW50ID0gJyc7XHJcbiAgfTtcclxuICBfaGFzSW52YWxpZElucHV0ICgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pXHJcbiAgfTtcclxuICBfaW5hY3RpdmVTdWJtaXRCdXR0b24gKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fbGlzdFNlbGVjdG9yLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICB9O1xyXG4gIF9hY3RpdmVTdWJtaXRCdXR0b24gKCl7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9saXN0U2VsZWN0b3IuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gIH07XHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2luYWN0aXZlU3VibWl0QnV0dG9uICgpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9hY3RpdmVTdWJtaXRCdXR0b24gKClcclxuICAgIH1cclxuICB9O1xyXG4gIF9zZXRFdmVudExpc3RlbmVycyAoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXRFbGVtZW50KVxyXG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgfTtcclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT57XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfTtcclxuICByZXNldFZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvciAoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxufTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IgKHNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gc2VsZWN0b3I7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcclxuICB9XHJcblxyXG4gIF9jbG9zZUJ5Q2xpY2sgPSAoZWwpID0+IHtcclxuICAgIGlmICghZWwudGFyZ2V0LmNsb3Nlc3QoJy5wb3B1cC1jb250ZW50Jykpe1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gIH1cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZihldnQua2V5ID09PSAnRXNjYXBlJyl7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gIH1cclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKSA9PntcclxuICAgICAgdGhpcy5jbG9zZSgpXHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbG9zZUJ5Q2xpY2spO1xyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgc3RhdGljIGZ1bGxTY3JpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fbWF4LWltZycpO1xyXG4gIHN0YXRpYyBmdWxsU2NyaW5UaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fbWF4LWltZy10aXRsZScpO1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKXtcclxuICAgIHN1cGVyIChzZWxlY3RvcilcclxuICB9XHJcbiAgb3BlbihlbGVtZW50KSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICBQb3B1cFdpdGhJbWFnZS5mdWxsU2NyaW4uc3JjID0gZWxlbWVudC5saW5rO1xyXG4gICAgUG9wdXBXaXRoSW1hZ2UuZnVsbFNjcmluLmFsdCA9IGVsZW1lbnQubmFtZTtcclxuICAgIFBvcHVwV2l0aEltYWdlLmZ1bGxTY3JpblRpdGxlLnRleHRDb250ZW50ID0gZWxlbWVudC5uYW1lO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvciAoc2VsZWN0b3IsIHN1Ym1pdEZvcm3QoW9sYmFjaykge1xyXG4gICAgICAgIHN1cGVyIChzZWxlY3RvcilcclxuICAgICAgICB0aGlzLl9zdWJtaXRGb3Jt0KFvbGJhY2sgPSBzdWJtaXRGb3Jt0KFvbGJhY2s7XHJcbiAgICAgICAgdGhpcy5fdGV4dEJ1dHRvbiA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnN1Ym1pdC1idXR0b24nKTtcclxuICAgICAgICB0aGlzLl90ZXh0QnV0dG9uRGVmYXVsdCA9IHRoaXMuX3RleHRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKSlcclxuICAgIH1cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICB0aGlzLnZhbHVlTGlzdCA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChlbCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVMaXN0W2VsLm5hbWVdID0gZWwudmFsdWVcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUxpc3Q7XHJcbiAgICB9XHJcbiAgICBzaG93RG93bmxvYWRNZXNzYWdlKGlzTG9hZGluZykge1xyXG4gICAgICAgIGlmKGlzTG9hZGluZyl7XHJcbiAgICAgICAgICB0aGlzLl90ZXh0QnV0dG9uLmlubmVyVGV4dCA9IFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIjtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgIHRoaXMuX3RleHRCdXR0b24uaW5uZXJUZXh0ID0gdGhpcy5fdGV4dEJ1dHRvbkRlZmF1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2dldElucHV0VmFsdWVzKClcclxuICAgICAgICAgICAgdGhpcy5zaG93RG93bmxvYWRNZXNzYWdlKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRGb3Jt0KFvbGJhY2soZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBzdGF0aWMgYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcicpXHJcblxyXG4gICAgY29uc3RydWN0b3Iobmlja05hbWVTZWxlY3RvciwgYWJvdXRNZVNlbGVjdG9yKXtcclxuICAgICAgICB0aGlzLl9uaWNrTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iobmlja05hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fYWJvdXRNZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRNZVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl91c2VySW5mbyA9IHt9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX25pY2tOYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2Fib3V0TWUudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xyXG4gICAgICAgIFVzZXJJbmZvLmF2YXRhci5zcmMgPSBkYXRhLmF2YXRhcjtcclxuICAgICAgICB0aGlzLl91c2VySW5mbyA9IGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VySW5mbztcclxuICAgIH1cclxuICAgIGdldElkVXNlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckluZm8uX2lkO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cERlbGV0ZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yIChzZWxlY3RvciwgY29sYmFja0RlbGV0ZUNhcmQpIHtcclxuICAgICAgICBzdXBlcihzZWxlY3RvcilcclxuICAgICAgICB0aGlzLl9kYXRhQ2FyZCA9e31cclxuICAgICAgICB0aGlzLl9jb2xiYWNrRGVsZXRlQ2FyZCA9IGNvbGJhY2tEZWxldGVDYXJkO1xyXG4gICAgICAgIHRoaXMuX3RleHRCdXR0b24gPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5zdWJtaXQtYnV0dG9uJyk7XHJcbiAgICAgICAgdGhpcy5fdGV4dEJ1dHRvbkRlZmF1bHQgPSB0aGlzLl90ZXh0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gICAgICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG4gICAgICB9XHJcbiAgICAgIG9wZW4oZGF0YSl7XHJcbiAgICAgICAgdGhpcy5fZGF0YUNhcmQgPSB7aWQ6IGRhdGEuaWQsIGNsb25lQ2FyZDogZGF0YS5jbG9uZUNhcmR9O1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YUNhcmQ7XHJcbiAgICAgIH1cclxuICAgICAgZGVsZXRlQ2FyZCAgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fZGF0YUNhcmQuY2xvbmVDYXJkLnJlbW92ZSgpO1xyXG4gICAgICAgIHRoaXMuX2RhdGFDYXJkLmNsb25lQ2FyZCA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgc2hvd0Rvd25sb2FkTWVzc2FnZShpc0xvYWRpbmcpIHtcclxuICAgICAgICBpZihpc0xvYWRpbmcpe1xyXG4gICAgICAgICAgdGhpcy5fdGV4dEJ1dHRvbi5pbm5lclRleHQgPSBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCI7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICB0aGlzLl90ZXh0QnV0dG9uLmlubmVyVGV4dCA9IHRoaXMuX3RleHRCdXR0b25EZWZhdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5zaG93RG93bmxvYWRNZXNzYWdlKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9jb2xiYWNrRGVsZXRlQ2FyZCh0aGlzLl9kYXRhQ2FyZC5pZClcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgICBzdGF0aWMgX3RlbXBsYXRlQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0ZW1wbGF0ZS1jYXJkJykuY29udGVudDtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIGlkVXNlciwgaGFuZGxlQ2FyZENsaWNrLCBjb2xiYWNrTGlrZUFjdGl2ZSwgY29sYmFja0xpa2VEZWxldGUpIHtcclxuICAgICAgICB0aGlzLl9pZFVzZXIgPSBpZFVzZXI7XHJcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgICAgIHRoaXMuX2NvbGJhY2tMaWtlQWN0aXZlID0gY29sYmFja0xpa2VBY3RpdmU7XHJcbiAgICAgICAgdGhpcy5fY29sYmFja0xpa2VEZWxldGUgPSBjb2xiYWNrTGlrZURlbGV0ZTtcclxuICAgICAgICB0aGlzLl9jbG9uZUNhcmQgPSBDYXJkLl90ZW1wbGF0ZUNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQnKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5fcGxhc2VJbWcgPSB0aGlzLl9jbG9uZUNhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2Nsb25lQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKTtcclxuICAgICAgICB0aGlzLl9wbGFjZVRpdGxlID0gdGhpcy5fY2xvbmVDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRMaWtlQ291bnRlciA9IHRoaXMuX2Nsb25lQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1jb3VudGVyJyk7XHJcblxyXG4gICAgfTtcclxuICAgIF90ZXN0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhLmxpa2VzLnNvbWUoKGVsKSA9PiBlbC5faWQgPT09IHRoaXMuX2lkVXNlcik7XHJcbiAgICB9XHJcbiAgICBjaGVja0xpa2VTdGF0dXMoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fdGVzdCgpKXtcclxuICAgICAgICAgICAgdGhpcy5fYWRkbGlrZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNoZWNrTGlrZUNvdW50ZXIgKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9jYXJkTGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcclxuICAgIH1cclxuICAgIGNoZW5nZURhdGFMaWtlQ291bnRlcihkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fZGF0YS5saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICB9XHJcbiAgICBjcmVhdGVDYXJkICgpIHtcclxuICAgICAgICB0aGlzLl9wbGFzZUltZy5zcmMgPSB0aGlzLl9kYXRhLmxpbms7XHJcbiAgICAgICAgdGhpcy5fcGxhc2VJbWcuYWx0ID0gdGhpcy5fZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX3BsYWNlVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9kYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2xvbmVDYXJkO1xyXG4gICAgfTtcclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9wbGFzZUltZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYoIXRoaXMuX3Rlc3QoKSl7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbGJhY2tMaWtlQWN0aXZlKHRoaXMuX2RhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLl90b2dnbGVMaWtlKCk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbGJhY2tMaWtlRGVsZXRlKHRoaXMuX2RhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLl90b2dnbGVMaWtlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgX2FkZGxpa2UoKSB7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcclxuICAgIH07XHJcbiAgICBfdG9nZ2xlTGlrZSgpIHtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tMaWtlQ291bnRlclxyXG4gICAgfTtcclxufTsiLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi9DYXJkLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VyQ2FyZCBleHRlbmRzIENhcmR7XHJcbiAgICBzdGF0aWMgX3RlbXBsYXRlQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0ZW1wbGF0ZS11c2VyQ2FyZCcpLmNvbnRlbnQ7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBpZHVzZXIsIGhhbmRsZUNhcmRDbGljaywgY29sYmFja0xpa2VBY3RpdmUsIGNvbGJhY2tMaWtlRGVsZXRlLCBjb2xiYWNrRGVsZXRlQ2FyZCkge1xyXG4gICAgICAgIHN1cGVyIChkYXRhLCBpZHVzZXIsIGhhbmRsZUNhcmRDbGljaywgY29sYmFja0xpa2VBY3RpdmUsIGNvbGJhY2tMaWtlRGVsZXRlKTtcclxuICAgICAgICB0aGlzLl9jb2xiYWNrRGVsZXRlQ2FyZCA9IGNvbGJhY2tEZWxldGVDYXJkO1xyXG4gICAgICAgIHRoaXMuX2Nsb25lQ2FyZCA9IFVzZXJDYXJkLl90ZW1wbGF0ZUNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQnKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5fcGxhY2VUaXRsZSA9IHRoaXMuX2Nsb25lQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKTtcclxuICAgICAgICB0aGlzLl9wbGFzZUltZyA9IHRoaXMuX2Nsb25lQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2xvbmVDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWJ1dHRvbicpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRMaWtlQ291bnRlciA9IHRoaXMuX2Nsb25lQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1jb3VudGVyJyk7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2xvbmVDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUtYnV0dG9uJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbGJhY2tEZWxldGVDYXJkKHtpZDogdGhpcy5fZGF0YS5faWQsIGNsb25lQ2FyZDogdGhpcy5fY2xvbmVDYXJkfSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTsiLCJleHBvcnQgY29uc3QgbGlzdFNlbGVjdG9yID0ge1xyXG4gIGlucHV0U2VsZWN0b3I6ICcuZm9ybV9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnN1Ym1pdC1idXR0b24nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdmb3JtX19zdWJtaXRfaW5hY3RpdmUnLFxyXG4gIGlucHV0RXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0X3R5cGVfZXJyb3InLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2F2YXRhcicpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2ZpbGUnKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQ3JlYXRlQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjcmVhdGUtY2FyZCcpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBEZWxldGVDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RlbGV0ZS1jYXJkJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEZ1bGxTY3JlZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9tYXgtaW1nJyk7XHJcblxyXG5leHBvcnQgY29uc3QgYWJvdXRNZVNlbGVjdG9yID0gJy5wcm9maWxlX19wcm9mZXNzaW9uJztcclxuZXhwb3J0IGNvbnN0IG5pY2tOYW1lU2VsZWN0b3IgPSAnLnByb2ZpbGVfX25pY2stbmFtZSc7XHJcblxyXG5leHBvcnQgY29uc3QgYXZhdGFySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXZhdGFyLWlucHV0Jyk7XHJcbmV4cG9ydCBjb25zdCBhYm91dE1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWJvdXQtaW5wdXQnKTtcclxuZXhwb3J0IGNvbnN0IG5pY2tOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbmFtZS1pbnB1dCcpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGJ1dHRvbkFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLXBob3RvJyk7XHJcbmV4cG9ydCBjb25zdCBidXR0b25DaGVuZ2VBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1hdmF0YXInKTtcclxuZXhwb3J0IGNvbnN0IGJ1dHRvblByb2ZpbGVFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3JtQ3JlYXRlQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb3JtLWNyZWF0ZScpO1xyXG5leHBvcnQgY29uc3QgZm9ybVByb2ZpbGVFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2ZpbGUtZWRpdCcpO1xyXG5leHBvcnQgY29uc3QgZm9ybUNoYW5nZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaGVuZy1hdmF0YXInKVxyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhcmQtbGlzdCcpOyIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFVzZXJDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJDYXJkLmpzXCI7XHJcbmltcG9ydCB7Y2FyZExpc3R9IGZyb20gXCIuLi9jb25zdGFudHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgICBhcGksXHJcbiAgICB1c2VySW5mbyxcclxuICAgIHBvcHVwRGVsZXRlLFxyXG4gICAgcG9wdXBXaXRoSW1hZ2VcclxufSBmcm9tIFwiLi4vLi4vcGFnZXMvaW5kZXguanNcIjtcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkTmV3Q2FyZCAoZGF0YSkge1xyXG4gICAgY2FyZExpc3QucHJlcGVuZChjcmVhdGVFbENhcmQoZGF0YSkpXHJcbiAgfTtcclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsQ2FyZChkYXRhKSB7XHJcbiAgICBjb25zdCBpZFVzZXIgPSB1c2VySW5mby5nZXRJZFVzZXIoKTtcclxuICAgIGlmIChkYXRhLm93bmVyLl9pZCA9PT0gaWRVc2VyKXtcclxuICAgICAgY29uc3QgbmV3Q2FyZCA9IG5ldyBVc2VyQ2FyZCAoXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBpZFVzZXIsXHJcbiAgICAgICAgKCkgPT4gcG9wdXBXaXRoSW1hZ2Uub3BlbihkYXRhKSwvL2hhbmRsZUNhcmRDbGlja1xyXG4gICAgICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICBhcGkubGlrZUNhcmQoZGF0YSlcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgbmV3Q2FyZC5jaGVuZ2VEYXRhTGlrZUNvdW50ZXIocmVzKTtcclxuICAgICAgICAgICAgbmV3Q2FyZC5jaGVja0xpa2VDb3VudGVyKHJlcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgICAgfSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbGJhY2tMaWtlQWN0aXZlXHJcbiAgICAgICAgKGRhdGEpID0+IHtcclxuICAgICAgICAgIGFwaS5kZWxldGVMaWtlKGRhdGEpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIG5ld0NhcmQuY2hlbmdlRGF0YUxpa2VDb3VudGVyKHJlcyk7XHJcbiAgICAgICAgICAgIG5ld0NhcmQuY2hlY2tMaWtlQ291bnRlcihyZXMpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAgIH0sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb2xiYWNrTGlrZURlbGV0ZVxyXG4gICAgICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICBwb3B1cERlbGV0ZS5vcGVuKGRhdGEpXHJcbiAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbGJhY2tEZWxldGVDYXJkXHJcbiAgICAgICk7XHJcbiAgICAgIG5ld0NhcmQuY2hlY2tMaWtlU3RhdHVzKCk7XHJcbiAgICAgIG5ld0NhcmQuY2hlY2tMaWtlQ291bnRlcihkYXRhKTtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXdDYXJkLmNyZWF0ZUNhcmQoKSA7XHJcbiAgICAgIHJldHVybiBjYXJkRWxlbWVudFxyXG4gICAgfWVsc2V7XHJcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZCAoXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBpZFVzZXIsXHJcbiAgICAgICAgKCkgPT4gcG9wdXBXaXRoSW1hZ2Uub3BlbihkYXRhKSwvL2hhbmRsZUNhcmRDbGlja1xyXG4gICAgICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICBhcGkubGlrZUNhcmQoZGF0YSlcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgbmV3Q2FyZC5jaGVuZ2VEYXRhTGlrZUNvdW50ZXIocmVzKTtcclxuICAgICAgICAgICAgbmV3Q2FyZC5jaGVja0xpa2VDb3VudGVyKHJlcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgICAgfSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbGJhY2tMaWtlQWN0aXZlXHJcbiAgICAgICAgKGRhdGEpID0+IHtcclxuICAgICAgICAgIGFwaS5kZWxldGVMaWtlKGRhdGEpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIG5ld0NhcmQuY2hlbmdlRGF0YUxpa2VDb3VudGVyKHJlcyk7XHJcbiAgICAgICAgICAgIG5ld0NhcmQuY2hlY2tMaWtlQ291bnRlcihyZXMpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAgIH0sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb2xiYWNrTGlrZURlbGV0ZVxyXG4gICAgICApO1xyXG4gICAgICBuZXdDYXJkLmNoZWNrTGlrZVN0YXR1cygpO1xyXG4gICAgICBuZXdDYXJkLmNoZWNrTGlrZUNvdW50ZXIoZGF0YSk7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3Q2FyZC5jcmVhdGVDYXJkKCk7XHJcbiAgICAgIHJldHVybiBjYXJkRWxlbWVudFxyXG4gICAgfVxyXG4gIH07IiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcbmltcG9ydCBBcGkgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyc7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IFBvcHVwRGVsZXRlIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cERlbGV0ZS5qcyc7XHJcbmltcG9ydCB7IFxyXG4gIGFkZE5ld0NhcmQsXHJcbiAgY3JlYXRlRWxDYXJkXHJcbn0gZnJvbSAnLi4vc2NyaXB0cy91dGlscy91dGlscy5qcyc7XHJcbmltcG9ydCB7XHJcbiAgbGlzdFNlbGVjdG9yLFxyXG4gIGJ1dHRvbkFkZENhcmQsXHJcbiAgYnV0dG9uQ2hlbmdlQXZhdGFyLFxyXG4gIGJ1dHRvblByb2ZpbGVFZGl0LFxyXG5cclxuICBwb3B1cEF2YXRhcixcclxuICBwb3B1cFByb2ZpbGUsXHJcbiAgcG9wdXBEZWxldGVDYXJkLFxyXG4gIHBvcHVwQ3JlYXRlQ2FyZCxcclxuICBwb3B1cEZ1bGxTY3JlZW4sXHJcblxyXG4gIGZvcm1DcmVhdGVDYXJkLFxyXG4gIGZvcm1Qcm9maWxlRWRpdCxcclxuICBmb3JtQ2hhbmdlQXZhdGFyLFxyXG5cclxuICBjYXJkTGlzdCxcclxuXHJcbiAgYWJvdXRNZVNlbGVjdG9yLFxyXG4gIG5pY2tOYW1lU2VsZWN0b3IsXHJcblxyXG4gIGF2YXRhcklucHV0LFxyXG4gIGFib3V0TWVJbnB1dCxcclxuICBuaWNrTmFtZUlucHV0LFxyXG59IGZyb20gJy4uL3NjcmlwdHMvY29uc3RhbnRzL2NvbnN0YW50cy5qcyc7XHJcblxyXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSAoe1xyXG4gIHVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDEnLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICc5ZjkzMmJiYy1hY2Q3LTRkYWUtODI0OS1jOTg1NTI2NTlmNTYnLFxyXG4gICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICB9XHJcbn0pO1xyXG5cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uICgoZWwpID0+IHNlY3Rpb24uYWRkSXRlbXMoY3JlYXRlRWxDYXJkKGVsKSksIGNhcmRMaXN0KTtcclxuZXhwb3J0IGNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKG5pY2tOYW1lU2VsZWN0b3IsIGFib3V0TWVTZWxlY3Rvcik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cERlbGV0ZSA9IG5ldyBQb3B1cERlbGV0ZSAocG9wdXBEZWxldGVDYXJkLFxyXG4gIChpZCkgPT4ge1xyXG4gIGFwaS5kZWxldGVDYXJkKGlkKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgcG9wdXBEZWxldGUuZGVsZXRlQ2FyZCgpXHJcbiAgICBzZWN0aW9uLnNldEl0ZW1zKHJlcylcclxuICAgIHBvcHVwRGVsZXRlLmNsb3NlKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAuZmluYWxseSgoKSA9PiBwb3B1cERlbGV0ZS5zaG93RG93bmxvYWRNZXNzYWdlKGZhbHNlKSlcclxufSk7XHJcblxyXG5leHBvcnQgY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UgKHBvcHVwRnVsbFNjcmVlbik7XHJcbmNvbnN0IGF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGxpc3RTZWxlY3RvciwgZm9ybUNoYW5nZUF2YXRhcik7XHJcbmNvbnN0IHByb2ZpbGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvciAobGlzdFNlbGVjdG9yLGZvcm1Qcm9maWxlRWRpdCk7XHJcbmNvbnN0IGNyZWF0ZUNhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvciAobGlzdFNlbGVjdG9yLGZvcm1DcmVhdGVDYXJkKTtcclxuY29uc3QgcG9wdXBXaXRoUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtIChwb3B1cFByb2ZpbGUsXHJcbiAgKGRhdGEpID0+IHtcclxuICBhcGkucGF0Y2hEYXRhVXNlcihkYXRhKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMpO1xyXG4gICAgcG9wdXBXaXRoUHJvZmlsZS5jbG9zZSgpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgLmZpbmFsbHkoKCkgPT4gcG9wdXBXaXRoUHJvZmlsZS5zaG93RG93bmxvYWRNZXNzYWdlKGZhbHNlKSlcclxufSk7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhDcmVhdGVDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0gKHBvcHVwQ3JlYXRlQ2FyZCxcclxuICAoZGF0YSkgPT4ge1xyXG4gIGFwaS5wb3N0TmV3Q2FyZChkYXRhKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIGFkZE5ld0NhcmQocmVzKVxyXG4gICAgcG9wdXBXaXRoQ3JlYXRlQ2FyZC5jbG9zZSgpXHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAuZmluYWxseSgoKSA9PiBwb3B1cFdpdGhDcmVhdGVDYXJkLnNob3dEb3dubG9hZE1lc3NhZ2UoZmFsc2UpKVxyXG59KTtcclxuY29uc3QgcG9wdXBDaGFuZ2VBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSAocG9wdXBBdmF0YXIsXHJcbiAgKGRhdGEpID0+IHtcclxuICBhcGkucGF0Y2hBdmF0YXJVc2VyKGRhdGEpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcyk7XHJcbiAgICBwb3B1cENoYW5nZUF2YXRhci5jbG9zZSgpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycilcclxuICB9KVxyXG4gIC5maW5hbGx5KCgpID0+IHBvcHVwQ2hhbmdlQXZhdGFyLnNoc2hvd0Rvd25sb2FkTWVzc2FnZShmYWxzZSkpXHJcbn0pO1xyXG5cclxuYXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxucHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNyZWF0ZUNhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuYnV0dG9uQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCkgPT4ge1xyXG4gIHBvcHVwV2l0aENyZWF0ZUNhcmQub3BlbigpO1xyXG4gIGNyZWF0ZUNhcmRWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5idXR0b25Qcm9maWxlRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCkgPT4ge1xyXG4gIGNvbnN0IGRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIG5pY2tOYW1lSW5wdXQudmFsdWUgPSBkYXRhLm5hbWU7XHJcbiAgYWJvdXRNZUlucHV0LnZhbHVlID0gZGF0YS5hYm91dDtcclxuICBwb3B1cFdpdGhQcm9maWxlLm9wZW4oKTtcclxuICBwcm9maWxlVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuYnV0dG9uQ2hlbmdlQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKSA9PiB7XHJcbiAgY29uc3QgZGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgYXZhdGFySW5wdXQudmFsdWUgPSBkYXRhLmF2YXRhcjtcclxuICBwb3B1cENoYW5nZUF2YXRhci5vcGVuKCk7XHJcbiAgYXZhdGFyVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KTtcclxuXHJcbnBvcHVwRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBDaGFuZ2VBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBXaXRoQ3JlYXRlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuYXBpLmdldEFsbENhcmQoKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIHNlY3Rpb24uc2V0SXRlbXMocmVzKVxyXG4gICAgc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycilcclxuICB9KTtcclxuXHJcbmFwaS5nZXRVc2VyRGF0YSgpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgfSk7Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiQXBpIiwiY29uZmlnIiwidGhpcyIsIl91cmwiLCJ1cmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0IiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiX2NoZWNrIiwiZGF0YSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZSIsImFib3V0IiwiYXZhdGFyIiwiaWQiLCJfaWQiLCJTZWN0aW9uIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9zZWxlY3RvciIsImZvckVhY2giLCJlbCIsImFwcGVuZCIsIkZvcm1WYWxpZGF0b3IiLCJsaXN0U2VsZWN0b3IiLCJmb3JtRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5hY3RpdmVTdWJtaXRCdXR0b24iLCJfYWN0aXZlU3VibWl0QnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2lucHV0TGlzdCIsImlucHV0RWxlbWVudCIsIl9oaWRlSW5wdXRFcnJvciIsIl9saXN0U2VsZWN0b3IiLCJfZm9ybUVsZW1lbnQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJxdWVyeVNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1hc2FnZSIsIl9pbnB1dEVycm9yIiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwidGV4dENvbnRlbnQiLCJyZW1vdmUiLCJzb21lIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaXNWYWxpZCIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXAiLCJzZWxlY3RvciIsInRhcmdldCIsImNsb3Nlc3QiLCJjbG9zZSIsIl9wb3B1cFNlbGVjdG9yIiwiX2Nsb3NlQnV0dG9uIiwiZG9jdW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2Nsb3NlQnlDbGljayIsIlBvcHVwV2l0aEltYWdlIiwiZWxlbWVudCIsImZ1bGxTY3JpbiIsInNyYyIsImxpbmsiLCJhbHQiLCJmdWxsU2NyaW5UaXRsZSIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3Jt0KFvbGJhY2siLCJfc3VibWl0Rm9ybdChb2xiYWNrIiwiX3RleHRCdXR0b24iLCJfdGV4dEJ1dHRvbkRlZmF1bHQiLCJ2YWx1ZUxpc3QiLCJ2YWx1ZSIsImlzTG9hZGluZyIsImlubmVyVGV4dCIsIl9nZXRJbnB1dFZhbHVlcyIsInNob3dEb3dubG9hZE1lc3NhZ2UiLCJyZXNldCIsIlVzZXJJbmZvIiwibmlja05hbWVTZWxlY3RvciIsImFib3V0TWVTZWxlY3RvciIsIl9uaWNrTmFtZSIsIl9hYm91dE1lIiwiX3VzZXJJbmZvIiwiUG9wdXBEZWxldGUiLCJjb2xiYWNrRGVsZXRlQ2FyZCIsIl9kYXRhQ2FyZCIsImNsb25lQ2FyZCIsIl9jb2xiYWNrRGVsZXRlQ2FyZCIsIkNhcmQiLCJpZFVzZXIiLCJoYW5kbGVDYXJkQ2xpY2siLCJjb2xiYWNrTGlrZUFjdGl2ZSIsImNvbGJhY2tMaWtlRGVsZXRlIiwiX2lkVXNlciIsIl9kYXRhIiwiX2hhbmRsZUNhcmRDbGljayIsIl9jb2xiYWNrTGlrZUFjdGl2ZSIsIl9jb2xiYWNrTGlrZURlbGV0ZSIsIl9jbG9uZUNhcmQiLCJfdGVtcGxhdGVDYXJkIiwiY2xvbmVOb2RlIiwiX3BsYXNlSW1nIiwiX2xpa2VCdXR0b24iLCJfcGxhY2VUaXRsZSIsIl9jYXJkTGlrZUNvdW50ZXIiLCJsaWtlcyIsIl90ZXN0IiwiX2FkZGxpa2UiLCJsZW5ndGgiLCJfdG9nZ2xlTGlrZSIsInRvZ2dsZSIsImNoZWNrTGlrZUNvdW50ZXIiLCJjb250ZW50IiwiVXNlckNhcmQiLCJpZHVzZXIiLCJfZGVsZXRlQnV0dG9uIiwicG9wdXBBdmF0YXIiLCJwb3B1cFByb2ZpbGUiLCJwb3B1cENyZWF0ZUNhcmQiLCJwb3B1cERlbGV0ZUNhcmQiLCJwb3B1cEZ1bGxTY3JlZW4iLCJhdmF0YXJJbnB1dCIsImFib3V0TWVJbnB1dCIsIm5pY2tOYW1lSW5wdXQiLCJidXR0b25BZGRDYXJkIiwiYnV0dG9uQ2hlbmdlQXZhdGFyIiwiYnV0dG9uUHJvZmlsZUVkaXQiLCJmb3JtQ3JlYXRlQ2FyZCIsImZvcm1Qcm9maWxlRWRpdCIsImZvcm1DaGFuZ2VBdmF0YXIiLCJjYXJkTGlzdCIsImNyZWF0ZUVsQ2FyZCIsInVzZXJJbmZvIiwiZ2V0SWRVc2VyIiwib3duZXIiLCJuZXdDYXJkIiwicG9wdXBXaXRoSW1hZ2UiLCJvcGVuIiwiYXBpIiwibGlrZUNhcmQiLCJjaGVuZ2VEYXRhTGlrZUNvdW50ZXIiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJkZWxldGVMaWtlIiwicG9wdXBEZWxldGUiLCJjaGVja0xpa2VTdGF0dXMiLCJjcmVhdGVDYXJkIiwiYXV0aG9yaXphdGlvbiIsInNlY3Rpb24iLCJhZGRJdGVtcyIsImRlbGV0ZUNhcmQiLCJzZXRJdGVtcyIsImZpbmFsbHkiLCJhdmF0YXJWYWxpZGF0b3IiLCJwcm9maWxlVmFsaWRhdG9yIiwiY3JlYXRlQ2FyZFZhbGlkYXRvciIsInBvcHVwV2l0aFByb2ZpbGUiLCJwYXRjaERhdGFVc2VyIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsInBvcHVwV2l0aENyZWF0ZUNhcmQiLCJwb3N0TmV3Q2FyZCIsInByZXBlbmQiLCJhZGROZXdDYXJkIiwicG9wdXBDaGFuZ2VBdmF0YXIiLCJwYXRjaEF2YXRhclVzZXIiLCJzaHNob3dEb3dubG9hZE1lc3NhZ2UiLCJlbmFibGVWYWxpZGF0aW9uIiwicmVzZXRWYWxpZGF0aW9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJnZXRBbGxDYXJkIiwicmVuZGVySXRlbXMiLCJnZXRVc2VyRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=