(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.url,this._headers=e.headers}var n,r;return n=t,(r=[{key:"_check",value:function(e){return e.ok?e.json():Promise.reject("Извините произошла ошибка")}},{key:"getUserData",value:function(){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then(this._check)}},{key:"getAllCard",value:function(){return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then(this._check)}},{key:"postNewCard",value:function(e){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._check)}},{key:"patchDataUser",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._check)}},{key:"patchAvatarUser",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then(this._check)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._check)}},{key:"likeCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e._id,"/likes"),{method:"PUT",headers:this._headers,body:JSON.stringify(e)}).then(this._check)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e._id,"/likes"),{method:"DELETE",headers:this._headers}).then(this._check)}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r,o,i,c=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._idUser=n,this._data=t,this._handleCardClick=r,this._colbackLikeActive=o,this._colbackLikeDelete=i,this._cloneCard=e._templateCard.querySelector(".card").cloneNode(!0),this._plaseImg=this._cloneCard.querySelector(".card__image"),this._likeButton=this._cloneCard.querySelector(".card__like-button"),this._placeTitle=this._cloneCard.querySelector(".card__title"),this._cardLikeCounter=this._cloneCard.querySelector(".card__like-counter")}var t,r;return t=e,(r=[{key:"_test",value:function(){var e=this;return this._data.likes.some((function(t){return t._id===e._idUser}))}},{key:"checkLikeStatus",value:function(){this._test()&&this._addlike()}},{key:"checkLikeCounter",value:function(e){this._cardLikeCounter.textContent=e.likes.length}},{key:"chengeDataLikeCounter",value:function(e){this._data.likes=e.likes}},{key:"createCard",value:function(){return this._plaseImg.src=this._data.link,this._plaseImg.alt=this._data.name,this._placeTitle.textContent=this._data.name,this._setEventListeners(),this._cloneCard}},{key:"_setEventListeners",value:function(){var e=this;this._plaseImg.addEventListener("click",(function(){e._handleCardClick()})),this._likeButton.addEventListener("click",(function(){e._test()?(e._colbackLikeDelete(e._data),e._toggleLike()):(e._colbackLikeActive(e._data),e._toggleLike())}))}},{key:"_addlike",value:function(){this._likeButton.classList.add("card__like-button_active")}},{key:"_toggleLike",value:function(){this._likeButton.classList.toggle("card__like-button_active"),this.checkLikeCounter}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=s(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},l.apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}r=c,o="_templateCard",i=document.querySelector("#template-card").content,o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i;var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function c(e,t,n,r,o,u){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(a=i.call(this,e,t,n,r,o))._colbackDeleteCard=u,a._cloneCard=c._templateCard.querySelector(".card").cloneNode(!0),a._placeTitle=a._cloneCard.querySelector(".card__title"),a._plaseImg=a._cloneCard.querySelector(".card__image"),a._likeButton=a._cloneCard.querySelector(".card__like-button"),a._cardLikeCounter=a._cloneCard.querySelector(".card__like-counter"),a._deleteButton=a._cloneCard.querySelector(".card__delete-button"),a}return t=c,(n=[{key:"_setEventListeners",value:function(){var e=this;l(h(c.prototype),"_setEventListeners",this).call(this),this._deleteButton.addEventListener("click",(function(){e._colbackDeleteCard({id:e._data._id,cloneCard:e._cloneCard})}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(c);function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(d,"_templateCard",document.querySelector("#template-userCard").content);var _=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._selector=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){return e._renderer(t)}))}},{key:"addItems",value:function(e){this._selector.append(e)}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r._inactiveSubmitButton():r._activeSubmitButton()})),v(this,"resetValidation",(function(){r._toggleButtonState(),r._inputList.forEach((function(e){r._hideInputError(e)}))})),this._listSelector=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._listSelector.inputSelector)),this._submitButton=this._formElement.querySelector(this._listSelector.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){this._inputError=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.add(this._listSelector.inputErrorClass),this._inputError.textContent=t}},{key:"_hideInputError",value:function(e){this._inputError=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.remove(this._listSelector.inputErrorClass),this._inputError.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_inactiveSubmitButton",value:function(){this._submitButton.classList.add(this._listSelector.inactiveButtonClass),this._submitButton.setAttribute("disabled","disabled")}},{key:"_activeSubmitButton",value:function(){this._submitButton.classList.remove(this._listSelector.inactiveButtonClass),this._submitButton.removeAttribute("disabled")}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonState(t)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"_closeByClick",(function(e){e.target.closest(".popup-content")||n.close()})),g(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),this._popupSelector=t,this._closeButton=this._popupSelector.querySelector(".popup__close-button")}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupSelector.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._closeButton.addEventListener("click",(function(){e.close()})),this._popupSelector.addEventListener("click",this._closeByClick)}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=O(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},E.apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function L(e,t){return L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},L(e,t)}function j(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(r);if(o){var n=P(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,e)}return t=c,(n=[{key:"open",value:function(e){E(P(c.prototype),"open",this).call(this),c.fullScrin.src=e.link,c.fullScrin.alt=e.name,c.fullScrinTitle.textContent=e.name}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(w);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=T(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},I.apply(this,arguments)}function T(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function U(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}q(B,"fullScrin",document.querySelector(".popup__max-img")),q(B,"fullScrinTitle",document.querySelector(".popup__max-img-title"));var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return U(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e))._submitFormСolback=t,n._textButton=n._popupSelector.querySelector(".submit-button"),n._textButtonDefault=n._textButton.textContent,n._formElement=n._popupSelector.querySelector(".form"),n._inputList=Array.from(n._formElement.querySelectorAll(".form__input")),n}return t=c,(n=[{key:"_getInputValues",value:function(){var e=this;return this.valueList={},this._inputList.forEach((function(t){e.valueList[t.name]=t.value})),this.valueList}},{key:"showDownloadMessage",value:function(e){this._textButton.innerText=e?"Сохранение...":this._textButtonDefault}},{key:"setEventListeners",value:function(){var e=this;I(A(c.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._getInputValues(),e.showDownloadMessage(!0),e._submitFormСolback}))}},{key:"close",value:function(){I(A(c.prototype),"close",this).call(this),this._formElement.reset()}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(w);function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nickName=document.querySelector(t),this._aboutMe=document.querySelector(n),this._userInfo={}}var t,n;return t=e,(n=[{key:"setUserInfo",value:function(t){this._nickName.textContent=t.name,this._aboutMe.textContent=t.about,e.avatar.src=t.avatar,this._userInfo=t}},{key:"getUserInfo",value:function(){return this._userInfo}},{key:"getIdUser",value:function(){return this._userInfo._id}}])&&M(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(){return G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=H(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},G.apply(this,arguments)}function H(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}function z(e,t){return z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},z(e,t)}function K(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(N,"avatar",document.querySelector(".profile__avatar"));var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=W(r);if(o){var n=W(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return K(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Q(n=i.call(this,e)),"_deleteCard",(function(){n._dataCard.cloneCard.remove(),n._dataCard.cloneCard=null})),n._dataCard={},n._colbackDeleteCard=t,n._closeButton=n._popupSelector.querySelector(".popup__close-button"),n._formElement=n._popupSelector.querySelector(".form"),n}return t=c,(n=[{key:"open",value:function(e){return this._dataCard={id:e.id,cloneCard:e.cloneCard},G(W(c.prototype),"open",this).call(this),this._dataCard}},{key:"setEventListeners",value:function(){var e=this;G(W(c.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e.showDownloadMessage(!0),e._colbackDeleteCard(e._dataCard.id,e._deleteCard)}))}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(V),Y={inputSelector:".form__input",submitButtonSelector:".submit-button",inactiveButtonClass:"form__submit_inactive",inputErrorClass:"form__input_type_error"},Z=document.querySelector("#avatar"),$=document.querySelector("#profile"),ee=document.querySelector("#create-card"),te=document.querySelector("#delete-card"),ne=document.querySelector(".popup_type_max-img"),re=document.querySelector("#avatar-input"),oe=document.querySelector("#about-input"),ie=document.querySelector("#name-input"),ce=document.querySelector(".profile__add-photo"),ue=document.querySelector(".profile__edit-avatar"),ae=document.querySelector(".profile__edit"),le=document.querySelector("#form-create"),se=document.querySelector("#profile-edit"),fe=document.querySelector("#cheng-avatar"),pe=document.querySelector("#card-list");function he(e){be.open(e)}function de(e){var t=_e.getIdUser();if(e.owner._id===t){var n=new d(e,t,(function(){return ve.open(e)}),(function(e){ye.likeCard(e).then((function(e){n.chengeDataLikeCounter(e),n.checkLikeCounter(e)})).catch((function(e){return console.log(e)}))}),(function(e){ye.deleteLike(e).then((function(e){n.chengeDataLikeCounter(e),n.checkLikeCounter(e)})).catch((function(e){return console.log(e)}))}),he);return n.checkLikeStatus(),n.checkLikeCounter(e),n.createCard()}var r=new c(e,t,(function(){return ve.open(e)}),(function(e){ye.likeCard(e).then((function(e){r.chengeDataLikeCounter(e),r.checkLikeCounter(e)})).catch((function(e){return console.log(e)}))}),(function(e){ye.deleteLike(e).then((function(e){r.chengeDataLikeCounter(e),r.checkLikeCounter(e)})).catch((function(e){return console.log(e)}))}));return r.checkLikeStatus(),r.checkLikeCounter(e),r.createCard()}var ye=new t({url:"https://mesto.nomoreparties.co/v1/cohort-41",headers:{authorization:"9f932bbc-acd7-4dae-8249-c98552659f56","content-type":"application/json"}}),_e=new N(".profile__nick-name",".profile__profession"),be=new X(te,(function(e,t){ye.deleteCard(e).then((function(){be.close()})).catch((function(e){return console.log(e)})).finally((function(){return be.showDownloadMessage(!1)}))})),ve=new B(ne),me=new m(Y,fe),ke=new m(Y,se),ge=new m(Y,le),we=new V($,(function(e){ye.patchDataUser(e).then((function(e){_e.getUserInfo(),_e.setUserInfo(e),we.close()})).catch((function(e){return console.log(e)})).finally((function(){return we.showDownloadMessage(!1)}))})),Se=new V(ee,(function(e){ye.postNewCard(e).then((function(e){!function(e){pe.prepend(de(e))}(e),Se.close()})).catch((function(e){return console.log(e)})).finally((function(){return Se.showDownloadMessage(!1)}))})),Ce=new V(Z,(function(e){ye.patchAvatarUser(e).then((function(e){_e.getUserInfo(),_e.setUserInfo(e),Ce.close()})).catch((function(e){console.log(e)})).finally((function(){return Ce.shshowDownloadMessage(!1)}))}));me.enableValidation(),ke.enableValidation(),ge.enableValidation(),ce.addEventListener("click",(function(){Se.open(),ge.resetValidation()})),ae.addEventListener("click",(function(){return e=_e.getUserInfo(),ie.value=e.name,oe.value=e.about,we.open(),void ke.resetValidation();var e})),ue.addEventListener("click",(function(){return e=_e.getUserInfo(),re.value=e.avatar,Ce.open(),void me.resetValidation();var e})),be.setEventListeners(),ve.setEventListeners(),we.setEventListeners(),Ce.setEventListeners(),Se.setEventListeners(),ye.getAllCard().then((function(e){var t=new _({items:e,renderer:function(e){t.addItems(de(e))}},pe);t.renderItems()})).catch((function(e){console.log(e)})),ye.getUserData().then((function(e){_e.setUserInfo(e)})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckNhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwRGVsZXRlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29uc3RhbnRzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5fdXJsID0gY29uZmlnLnVybDtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XHJcbiAgICB9XHJcbiAgICBfY2hlY2socmVzKXtcclxuICAgICAgICBpZihyZXMub2spe1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgn0JjQt9Cy0LjQvdC40YLQtSDQv9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwJylcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRVc2VyRGF0YSgpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICB9KS50aGVuKHRoaXMuX2NoZWNrKTtcclxuICAgIH1cclxuICAgIGdldEFsbENhcmQoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgfSkudGhlbih0aGlzLl9jaGVjayk7XHJcbiAgICB9XHJcbiAgICBwb3N0TmV3Q2FyZChkYXRhKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXHJcbiAgICAgICAgfSkudGhlbih0aGlzLl9jaGVjayk7XHJcbiAgICB9XHJcbiAgICBwYXRjaERhdGFVc2VyKGRhdGEpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgICAgICAgICAgIGFib3V0OiBkYXRhLmFib3V0XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSkudGhlbih0aGlzLl9jaGVjayk7XHJcbiAgICB9XHJcblxyXG4gICAgcGF0Y2hBdmF0YXJVc2VyKGRhdGEpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSkudGhlbih0aGlzLl9jaGVjayk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGRlbGV0ZUNhcmQoaWQpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7aWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2spO1xyXG4gICAgfVxyXG5cclxuICAgIGxpa2VDYXJkKGRhdGEpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7ZGF0YS5faWR9L2xpa2VzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxyXG4gICAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2spO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUxpa2UoZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7ZGF0YS5faWR9L2xpa2VzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2spO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgICBzdGF0aWMgX3RlbXBsYXRlQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0ZW1wbGF0ZS1jYXJkJykuY29udGVudDtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIGlkVXNlciwgaGFuZGxlQ2FyZENsaWNrLCBjb2xiYWNrTGlrZUFjdGl2ZSwgY29sYmFja0xpa2VEZWxldGUpIHtcclxuICAgICAgICB0aGlzLl9pZFVzZXIgPSBpZFVzZXI7XHJcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgICAgIHRoaXMuX2NvbGJhY2tMaWtlQWN0aXZlID0gY29sYmFja0xpa2VBY3RpdmU7XHJcbiAgICAgICAgdGhpcy5fY29sYmFja0xpa2VEZWxldGUgPSBjb2xiYWNrTGlrZURlbGV0ZTtcclxuICAgICAgICB0aGlzLl9jbG9uZUNhcmQgPSBDYXJkLl90ZW1wbGF0ZUNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQnKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5fcGxhc2VJbWcgPSB0aGlzLl9jbG9uZUNhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2Nsb25lQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKTtcclxuICAgICAgICB0aGlzLl9wbGFjZVRpdGxlID0gdGhpcy5fY2xvbmVDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRMaWtlQ291bnRlciA9IHRoaXMuX2Nsb25lQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1jb3VudGVyJyk7XHJcblxyXG4gICAgfTtcclxuICAgIF90ZXN0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhLmxpa2VzLnNvbWUoKGVsKSA9PiBlbC5faWQgPT09IHRoaXMuX2lkVXNlcik7XHJcbiAgICB9XHJcbiAgICBjaGVja0xpa2VTdGF0dXMoKSB7XHJcbiAgICAgICAgaWYodGhpcy5fdGVzdCgpKXtcclxuICAgICAgICAgICAgdGhpcy5fYWRkbGlrZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNoZWNrTGlrZUNvdW50ZXIgKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9jYXJkTGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcclxuICAgIH1cclxuICAgIGNoZW5nZURhdGFMaWtlQ291bnRlcihkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fZGF0YS5saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICB9XHJcbiAgICBjcmVhdGVDYXJkICgpIHtcclxuICAgICAgICB0aGlzLl9wbGFzZUltZy5zcmMgPSB0aGlzLl9kYXRhLmxpbms7XHJcbiAgICAgICAgdGhpcy5fcGxhc2VJbWcuYWx0ID0gdGhpcy5fZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX3BsYWNlVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9kYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2xvbmVDYXJkO1xyXG4gICAgfTtcclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9wbGFzZUltZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYoIXRoaXMuX3Rlc3QoKSl7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbGJhY2tMaWtlQWN0aXZlKHRoaXMuX2RhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLl90b2dnbGVMaWtlKCk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbGJhY2tMaWtlRGVsZXRlKHRoaXMuX2RhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLl90b2dnbGVMaWtlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgX2FkZGxpa2UoKSB7XHJcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcclxuICAgIH07XHJcbiAgICBfdG9nZ2xlTGlrZSgpIHtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xyXG4gICAgICAgIHRoaXMuY2hlY2tMaWtlQ291bnRlclxyXG4gICAgfTtcclxufTsiLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi9DYXJkLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VyQ2FyZCBleHRlbmRzIENhcmR7XHJcbiAgICBzdGF0aWMgX3RlbXBsYXRlQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0ZW1wbGF0ZS11c2VyQ2FyZCcpLmNvbnRlbnQ7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBpZHVzZXIsIGhhbmRsZUNhcmRDbGljaywgY29sYmFja0xpa2VBY3RpdmUsIGNvbGJhY2tMaWtlRGVsZXRlLCBjb2xiYWNrRGVsZXRlQ2FyZCkge1xyXG4gICAgICAgIHN1cGVyIChkYXRhLCBpZHVzZXIsIGhhbmRsZUNhcmRDbGljaywgY29sYmFja0xpa2VBY3RpdmUsIGNvbGJhY2tMaWtlRGVsZXRlKTtcclxuICAgICAgICB0aGlzLl9jb2xiYWNrRGVsZXRlQ2FyZCA9IGNvbGJhY2tEZWxldGVDYXJkO1xyXG4gICAgICAgIHRoaXMuX2Nsb25lQ2FyZCA9IFVzZXJDYXJkLl90ZW1wbGF0ZUNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQnKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy5fcGxhY2VUaXRsZSA9IHRoaXMuX2Nsb25lQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKTtcclxuICAgICAgICB0aGlzLl9wbGFzZUltZyA9IHRoaXMuX2Nsb25lQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2xvbmVDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWJ1dHRvbicpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRMaWtlQ291bnRlciA9IHRoaXMuX2Nsb25lQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1jb3VudGVyJyk7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2xvbmVDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUtYnV0dG9uJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NvbGJhY2tEZWxldGVDYXJkKHtpZDogdGhpcy5fZGF0YS5faWQsIGNsb25lQ2FyZDogdGhpcy5fY2xvbmVDYXJkfSlcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3RvciAoe2l0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKXtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fc2VsZWN0b3IgPSBjb250YWluZXJTZWxlY3RvcjtcclxuICB9O1xyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGVsKSA9PiB0aGlzLl9yZW5kZXJlcihlbCkpO1xyXG4gIH07XHJcblxyXG4gIGFkZEl0ZW1zKGVsKSB7XHJcbiAgICB0aGlzLl9zZWxlY3Rvci5hcHBlbmQoZWwpXHJcbiAgfTtcclxufTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihsaXN0U2VsZWN0b3IsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9saXN0U2VsZWN0b3IgPSBsaXN0U2VsZWN0b3JcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnRcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9saXN0U2VsZWN0b3IuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9saXN0U2VsZWN0b3Iuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH07XHJcbiAgX2lzVmFsaWQgKGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9O1xyXG4gIF9zaG93SW5wdXRFcnJvciAoaW5wdXRFbGVtZW50LCBlcnJvck1hc2FnZSkge1xyXG4gICAgdGhpcy5faW5wdXRFcnJvciA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2xpc3RTZWxlY3Rvci5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvci50ZXh0Q29udGVudCA9IGVycm9yTWFzYWdlO1xyXG4gIH07XHJcbiAgX2hpZGVJbnB1dEVycm9yIChpbnB1dEVsZW1lbnQpe1xyXG4gICAgdGhpcy5faW5wdXRFcnJvciA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2xpc3RTZWxlY3Rvci5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvci50ZXh0Q29udGVudCA9ICcnO1xyXG4gIH07XHJcbiAgX2hhc0ludmFsaWRJbnB1dCAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KVxyXG4gIH07XHJcbiAgX2luYWN0aXZlU3VibWl0QnV0dG9uICgpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2xpc3RTZWxlY3Rvci5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgfTtcclxuICBfYWN0aXZlU3VibWl0QnV0dG9uICgpe1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fbGlzdFNlbGVjdG9yLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICB9O1xyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9pbmFjdGl2ZVN1Ym1pdEJ1dHRvbiAoKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYWN0aXZlU3VibWl0QnV0dG9uICgpXHJcbiAgICB9XHJcbiAgfTtcclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9pc1ZhbGlkKGlucHV0RWxlbWVudClcclxuICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG4gIH07XHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+e1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH07XHJcbiAgcmVzZXRWYWxpZGF0aW9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IgKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yIChzZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3RvciA9IHNlbGVjdG9yO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UtYnV0dG9uJyk7XHJcbiAgfVxyXG5cclxuICBfY2xvc2VCeUNsaWNrID0gKGVsKSA9PiB7XHJcbiAgICBpZiAoIWVsLnRhcmdldC5jbG9zZXN0KCcucG9wdXAtY29udGVudCcpKXtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICB9XHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYoZXZ0LmtleSA9PT0gJ0VzY2FwZScpe1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICB9XHJcbiAgfVxyXG4gIG9wZW4oKSB7XHJcbiAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCkgPT57XHJcbiAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY2xvc2VCeUNsaWNrKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIHN0YXRpYyBmdWxsU2NyaW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX21heC1pbWcnKTtcclxuICBzdGF0aWMgZnVsbFNjcmluVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX21heC1pbWctdGl0bGUnKTtcclxuICBjb25zdHJ1Y3RvcihzZWxlY3Rvcil7XHJcbiAgICBzdXBlciAoc2VsZWN0b3IpXHJcbiAgfVxyXG4gIG9wZW4oZWxlbWVudCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgUG9wdXBXaXRoSW1hZ2UuZnVsbFNjcmluLnNyYyA9IGVsZW1lbnQubGluaztcclxuICAgIFBvcHVwV2l0aEltYWdlLmZ1bGxTY3Jpbi5hbHQgPSBlbGVtZW50Lm5hbWU7XHJcbiAgICBQb3B1cFdpdGhJbWFnZS5mdWxsU2NyaW5UaXRsZS50ZXh0Q29udGVudCA9IGVsZW1lbnQubmFtZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IgKHNlbGVjdG9yLCBzdWJtaXRGb3Jt0KFvbGJhY2spIHtcclxuICAgICAgICBzdXBlciAoc2VsZWN0b3IpXHJcbiAgICAgICAgdGhpcy5fc3VibWl0Rm9ybdChb2xiYWNrID0gc3VibWl0Rm9ybdChb2xiYWNrO1xyXG4gICAgICAgIHRoaXMuX3RleHRCdXR0b24gPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5zdWJtaXQtYnV0dG9uJyk7XHJcbiAgICAgICAgdGhpcy5fdGV4dEJ1dHRvbkRlZmF1bHQgPSB0aGlzLl90ZXh0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1fX2lucHV0JykpXHJcbiAgICB9XHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZUxpc3QgPSB7fTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoZWwpID0+e1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlTGlzdFtlbC5uYW1lXSA9IGVsLnZhbHVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVMaXN0O1xyXG4gICAgfVxyXG4gICAgc2hvd0Rvd25sb2FkTWVzc2FnZShpc0xvYWRpbmcpIHtcclxuICAgICAgICBpZihpc0xvYWRpbmcpe1xyXG4gICAgICAgICAgdGhpcy5fdGV4dEJ1dHRvbi5pbm5lclRleHQgPSBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCI7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICB0aGlzLl90ZXh0QnV0dG9uLmlubmVyVGV4dCA9IHRoaXMuX3RleHRCdXR0b25EZWZhdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpXHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0Rvd25sb2FkTWVzc2FnZSh0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0Rm9ybdChb2xiYWNrO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgc3RhdGljIGF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKG5pY2tOYW1lU2VsZWN0b3IsIGFib3V0TWVTZWxlY3Rvcil7XHJcbiAgICAgICAgdGhpcy5fbmlja05hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5pY2tOYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2Fib3V0TWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0TWVTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fdXNlckluZm8gPSB7fVxyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9uaWNrTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9hYm91dE1lLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcclxuICAgICAgICBVc2VySW5mby5hdmF0YXIuc3JjID0gZGF0YS5hdmF0YXI7XHJcbiAgICAgICAgdGhpcy5fdXNlckluZm8gPSBkYXRhO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckluZm87XHJcbiAgICB9XHJcbiAgICBnZXRJZFVzZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJJbmZvLl9pZDtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwRGVsZXRlIGV4dGVuZHMgUG9wdXBXaXRoRm9ybSB7XHJcbiAgICBjb25zdHJ1Y3RvciAoc2VsZWN0b3IsIGNvbGJhY2tEZWxldGVDYXJkKSB7XHJcbiAgICAgICAgc3VwZXIoc2VsZWN0b3IpXHJcbiAgICAgICAgdGhpcy5fZGF0YUNhcmQgPXt9XHJcbiAgICAgICAgdGhpcy5fY29sYmFja0RlbGV0ZUNhcmQgPSBjb2xiYWNrRGVsZXRlQ2FyZDtcclxuICAgICAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcclxuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcclxuICAgICAgfVxyXG4gICAgICBvcGVuKGRhdGEpe1xyXG4gICAgICAgIHRoaXMuX2RhdGFDYXJkID0ge2lkOiBkYXRhLmlkLCBjbG9uZUNhcmQ6IGRhdGEuY2xvbmVDYXJkfTtcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFDYXJkO1xyXG4gICAgICB9XHJcbiAgICAgIF9kZWxldGVDYXJkICA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9kYXRhQ2FyZC5jbG9uZUNhcmQucmVtb3ZlKCk7XHJcbiAgICAgICAgdGhpcy5fZGF0YUNhcmQuY2xvbmVDYXJkID0gbnVsbDtcclxuICAgICAgfVxyXG5cclxuICAgICAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0Rvd25sb2FkTWVzc2FnZSh0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5fY29sYmFja0RlbGV0ZUNhcmQodGhpcy5fZGF0YUNhcmQuaWQsIHRoaXMuX2RlbGV0ZUNhcmQpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxufSIsImV4cG9ydCBjb25zdCBsaXN0U2VsZWN0b3IgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pbnB1dCcsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuc3VibWl0LWJ1dHRvbicsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ2Zvcm1fX3N1Ym1pdF9pbmFjdGl2ZScsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAnZm9ybV9faW5wdXRfdHlwZV9lcnJvcicsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcG9wdXBBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXZhdGFyJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZmlsZScpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBDcmVhdGVDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NyZWF0ZS1jYXJkJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cERlbGV0ZUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVsZXRlLWNhcmQnKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwRnVsbFNjcmVlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX21heC1pbWcnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhYm91dE1lU2VsZWN0b3IgPSAnLnByb2ZpbGVfX3Byb2Zlc3Npb24nO1xyXG5leHBvcnQgY29uc3Qgbmlja05hbWVTZWxlY3RvciA9ICcucHJvZmlsZV9fbmljay1uYW1lJztcclxuXHJcbmV4cG9ydCBjb25zdCBhdmF0YXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhdmF0YXItaW5wdXQnKTtcclxuZXhwb3J0IGNvbnN0IGFib3V0TWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhYm91dC1pbnB1dCcpO1xyXG5leHBvcnQgY29uc3Qgbmlja05hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lLWlucHV0Jyk7XHJcblxyXG5leHBvcnQgY29uc3QgYnV0dG9uQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtcGhvdG8nKTtcclxuZXhwb3J0IGNvbnN0IGJ1dHRvbkNoZW5nZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWF2YXRhcicpO1xyXG5leHBvcnQgY29uc3QgYnV0dG9uUHJvZmlsZUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdCcpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1DcmVhdGVDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm0tY3JlYXRlJyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtUHJvZmlsZUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZmlsZS1lZGl0Jyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtQ2hhbmdlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoZW5nLWF2YXRhcicpXHJcblxyXG5leHBvcnQgY29uc3QgY2FyZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FyZC1saXN0Jyk7IiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcbmltcG9ydCBBcGkgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyc7XHJcbmltcG9ydCBDYXJkIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IFVzZXJDYXJkIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VyQ2FyZC5qcyc7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IFBvcHVwRGVsZXRlIGZyb20gJy4uL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cERlbGV0ZS5qcyc7XHJcbmltcG9ydCB7XHJcbiAgbGlzdFNlbGVjdG9yLFxyXG4gIGJ1dHRvbkFkZENhcmQsXHJcbiAgYnV0dG9uQ2hlbmdlQXZhdGFyLFxyXG4gIGJ1dHRvblByb2ZpbGVFZGl0LFxyXG5cclxuICBwb3B1cEF2YXRhcixcclxuICBwb3B1cFByb2ZpbGUsXHJcbiAgcG9wdXBEZWxldGVDYXJkLFxyXG4gIHBvcHVwQ3JlYXRlQ2FyZCxcclxuICBwb3B1cEZ1bGxTY3JlZW4sXHJcblxyXG4gIGZvcm1DcmVhdGVDYXJkLFxyXG4gIGZvcm1Qcm9maWxlRWRpdCxcclxuICBmb3JtQ2hhbmdlQXZhdGFyLFxyXG5cclxuICBjYXJkTGlzdCxcclxuXHJcbiAgYWJvdXRNZVNlbGVjdG9yLFxyXG4gIG5pY2tOYW1lU2VsZWN0b3IsXHJcblxyXG4gIGF2YXRhcklucHV0LFxyXG4gIGFib3V0TWVJbnB1dCxcclxuICBuaWNrTmFtZUlucHV0LFxyXG59IGZyb20gJy4uL3NjcmlwdHMvY29uc3RhbnRzL2NvbnN0YW50cy5qcyc7XHJcblxyXG5mdW5jdGlvbiBvcGVuUG9wdXBEZWxldGVDYXJkIChkYXRhKSB7XHJcbiAgcG9wdXBEZWxldGUub3BlbihkYXRhKVxyXG59O1xyXG5cclxuZnVuY3Rpb24gb3BlblBvcHVwUHJvZmlsZSAoZGF0YSkge1xyXG4gIG5pY2tOYW1lSW5wdXQudmFsdWUgPSBkYXRhLm5hbWU7XHJcbiAgYWJvdXRNZUlucHV0LnZhbHVlID0gZGF0YS5hYm91dDtcclxuICBwb3B1cFdpdGhQcm9maWxlLm9wZW4oKTtcclxuICBwcm9maWxlVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gb3BlblBvcHVwQ3JlYXRlQ2FyZCAoKSB7XHJcbiAgcG9wdXBXaXRoQ3JlYXRlQ2FyZC5vcGVuKCk7XHJcbiAgY3JlYXRlQ2FyZFZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIG9wZW5Qb3B1cENoYW5nZUF2YXRhciAoZGF0YSkge1xyXG4gIGF2YXRhcklucHV0LnZhbHVlID0gZGF0YS5hdmF0YXI7XHJcbiAgcG9wdXBDaGFuZ2VBdmF0YXIub3BlbigpO1xyXG4gIGF2YXRhclZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRWxDYXJkKGRhdGEpIHtcclxuICBjb25zdCBpZFVzZXIgPSB1c2VySW5mby5nZXRJZFVzZXIoKTtcclxuICBpZiAoZGF0YS5vd25lci5faWQgPT09IGlkVXNlcil7XHJcbiAgICBjb25zdCBuZXdDYXJkID0gbmV3IFVzZXJDYXJkIChcclxuICAgICAgZGF0YSxcclxuICAgICAgaWRVc2VyLFxyXG4gICAgICAoKSA9PiBwb3B1cFdpdGhJbWFnZS5vcGVuKGRhdGEpLC8vaGFuZGxlQ2FyZENsaWNrXHJcbiAgICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgYXBpLmxpa2VDYXJkKGRhdGEpXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgbmV3Q2FyZC5jaGVuZ2VEYXRhTGlrZUNvdW50ZXIocmVzKTtcclxuICAgICAgICAgIG5ld0NhcmQuY2hlY2tMaWtlQ291bnRlcihyZXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgIH0sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb2xiYWNrTGlrZUFjdGl2ZVxyXG4gICAgICAoZGF0YSkgPT4ge1xyXG4gICAgICAgIGFwaS5kZWxldGVMaWtlKGRhdGEpXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgbmV3Q2FyZC5jaGVuZ2VEYXRhTGlrZUNvdW50ZXIocmVzKTtcclxuICAgICAgICAgIG5ld0NhcmQuY2hlY2tMaWtlQ291bnRlcihyZXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgIH0sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb2xiYWNrTGlrZURlbGV0ZVxyXG4gICAgICBvcGVuUG9wdXBEZWxldGVDYXJkLFxyXG4gICAgKTtcclxuICAgIG5ld0NhcmQuY2hlY2tMaWtlU3RhdHVzKCk7XHJcbiAgICBuZXdDYXJkLmNoZWNrTGlrZUNvdW50ZXIoZGF0YSk7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IG5ld0NhcmQuY3JlYXRlQ2FyZCgpIDtcclxuICAgIHJldHVybiBjYXJkRWxlbWVudFxyXG4gIH1lbHNle1xyXG4gICAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkIChcclxuICAgICAgZGF0YSxcclxuICAgICAgaWRVc2VyLFxyXG4gICAgICAoKSA9PiBwb3B1cFdpdGhJbWFnZS5vcGVuKGRhdGEpLC8vaGFuZGxlQ2FyZENsaWNrXHJcbiAgICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgYXBpLmxpa2VDYXJkKGRhdGEpXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgbmV3Q2FyZC5jaGVuZ2VEYXRhTGlrZUNvdW50ZXIocmVzKTtcclxuICAgICAgICAgIG5ld0NhcmQuY2hlY2tMaWtlQ291bnRlcihyZXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgIH0sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb2xiYWNrTGlrZUFjdGl2ZVxyXG4gICAgICAoZGF0YSkgPT4ge1xyXG4gICAgICAgIGFwaS5kZWxldGVMaWtlKGRhdGEpXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgbmV3Q2FyZC5jaGVuZ2VEYXRhTGlrZUNvdW50ZXIocmVzKTtcclxuICAgICAgICAgIG5ld0NhcmQuY2hlY2tMaWtlQ291bnRlcihyZXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgICAgIH0sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb2xiYWNrTGlrZURlbGV0ZVxyXG4gICAgKTtcclxuICAgIG5ld0NhcmQuY2hlY2tMaWtlU3RhdHVzKCk7XHJcbiAgICBuZXdDYXJkLmNoZWNrTGlrZUNvdW50ZXIoZGF0YSk7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IG5ld0NhcmQuY3JlYXRlQ2FyZCgpO1xyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50XHJcbiAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gYWRkTmV3Q2FyZCAoZGF0YSkge1xyXG4gIGNhcmRMaXN0LnByZXBlbmQoY3JlYXRlRWxDYXJkKGRhdGEpKVxyXG59O1xyXG5cclxuZnVuY3Rpb24gc3VibWl0Q3JlYXRlQ2FyZCAoZGF0YSkge1xyXG4gIGFwaS5wb3N0TmV3Q2FyZChkYXRhKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIGFkZE5ld0NhcmQocmVzKVxyXG4gICAgcG9wdXBXaXRoQ3JlYXRlQ2FyZC5jbG9zZSgpXHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAuZmluYWxseSgoKSA9PiBwb3B1cFdpdGhDcmVhdGVDYXJkLnNob3dEb3dubG9hZE1lc3NhZ2UoZmFsc2UpKVxyXG59O1xyXG5cclxuZnVuY3Rpb24gc3VibWl0RGVsZXRlQ2FyZCAoaWQsIG1ldGhvZCkge1xyXG4gIGFwaS5kZWxldGVDYXJkKGlkKVxyXG4gIC50aGVuKCgpID0+IHtcclxuICAgIG1ldGhvZDtcclxuICAgIHBvcHVwRGVsZXRlLmNsb3NlKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAuZmluYWxseSgoKSA9PiBwb3B1cERlbGV0ZS5zaG93RG93bmxvYWRNZXNzYWdlKGZhbHNlKSlcclxufTtcclxuXHJcbmZ1bmN0aW9uIHN1Ym1pdFByb2ZpbGUgKGRhdGEpIHtcclxuICBhcGkucGF0Y2hEYXRhVXNlcihkYXRhKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMpO1xyXG4gICAgcG9wdXBXaXRoUHJvZmlsZS5jbG9zZSgpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgLmZpbmFsbHkoKCkgPT4gcG9wdXBXaXRoUHJvZmlsZS5zaG93RG93bmxvYWRNZXNzYWdlKGZhbHNlKSlcclxufTtcclxuXHJcbmZ1bmN0aW9uIHN1Ym1pdENoZW5nZUF2YXRhciAoZGF0YSkge1xyXG4gIGFwaS5wYXRjaEF2YXRhclVzZXIoZGF0YSlcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcclxuICAgIHBvcHVwQ2hhbmdlQXZhdGFyLmNsb3NlKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKVxyXG4gIH0pXHJcbiAgLmZpbmFsbHkoKCkgPT4gcG9wdXBDaGFuZ2VBdmF0YXIuc2hzaG93RG93bmxvYWRNZXNzYWdlKGZhbHNlKSlcclxufTtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkgKHtcclxuICB1cmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQxJyxcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiAnOWY5MzJiYmMtYWNkNy00ZGFlLTgyNDktYzk4NTUyNjU5ZjU2JyxcclxuICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgfVxyXG59KTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKG5pY2tOYW1lU2VsZWN0b3IsIGFib3V0TWVTZWxlY3Rvcik7XHJcbmNvbnN0IHBvcHVwRGVsZXRlID0gbmV3IFBvcHVwRGVsZXRlIChwb3B1cERlbGV0ZUNhcmQsIHN1Ym1pdERlbGV0ZUNhcmQpO1xyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSAocG9wdXBGdWxsU2NyZWVuKTtcclxuY29uc3QgYXZhdGFyVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IobGlzdFNlbGVjdG9yLCBmb3JtQ2hhbmdlQXZhdGFyKTtcclxuY29uc3QgcHJvZmlsZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yIChsaXN0U2VsZWN0b3IsZm9ybVByb2ZpbGVFZGl0KTtcclxuY29uc3QgY3JlYXRlQ2FyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yIChsaXN0U2VsZWN0b3IsZm9ybUNyZWF0ZUNhcmQpO1xyXG5jb25zdCBwb3B1cFdpdGhQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0gKHBvcHVwUHJvZmlsZSwgc3VibWl0UHJvZmlsZSk7XHJcbmNvbnN0IHBvcHVwV2l0aENyZWF0ZUNhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybSAocG9wdXBDcmVhdGVDYXJkLCBzdWJtaXRDcmVhdGVDYXJkKTtcclxuY29uc3QgcG9wdXBDaGFuZ2VBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSAocG9wdXBBdmF0YXIsc3VibWl0Q2hlbmdlQXZhdGFyKTtcclxuXHJcbmF2YXRhclZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbnByb2ZpbGVWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5jcmVhdGVDYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmJ1dHRvbkFkZENhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLG9wZW5Qb3B1cENyZWF0ZUNhcmQpO1xyXG5idXR0b25Qcm9maWxlRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCkgPT4gb3BlblBvcHVwUHJvZmlsZSh1c2VySW5mby5nZXRVc2VySW5mbygpKSk7XHJcbmJ1dHRvbkNoZW5nZUF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKCkgPT4gb3BlblBvcHVwQ2hhbmdlQXZhdGFyKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpKTtcclxuXHJcbnBvcHVwRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBDaGFuZ2VBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBXaXRoQ3JlYXRlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuYXBpLmdldEFsbENhcmQoKVxyXG4gIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uICh7XHJcbiAgICBpdGVtczogZGF0YSxcclxuICAgIHJlbmRlcmVyOiAoZWwpID0+IHtcclxuICAgICAgc2VjdGlvbi5hZGRJdGVtcyhjcmVhdGVFbENhcmQoZWwpKVxyXG4gICAgfX0sXHJcbiAgICBjYXJkTGlzdCk7XHJcbiAgc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycilcclxuICB9KTtcclxuXHJcbmFwaS5nZXRVc2VyRGF0YSgpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgfSk7Il0sIm5hbWVzIjpbIkFwaSIsImNvbmZpZyIsInRoaXMiLCJfdXJsIiwidXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsIl9jaGVjayIsImRhdGEiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm5hbWUiLCJhYm91dCIsImF2YXRhciIsImlkIiwiX2lkIiwiQ2FyZCIsImlkVXNlciIsImhhbmRsZUNhcmRDbGljayIsImNvbGJhY2tMaWtlQWN0aXZlIiwiY29sYmFja0xpa2VEZWxldGUiLCJfaWRVc2VyIiwiX2RhdGEiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2NvbGJhY2tMaWtlQWN0aXZlIiwiX2NvbGJhY2tMaWtlRGVsZXRlIiwiX2Nsb25lQ2FyZCIsIl90ZW1wbGF0ZUNhcmQiLCJxdWVyeVNlbGVjdG9yIiwiY2xvbmVOb2RlIiwiX3BsYXNlSW1nIiwiX2xpa2VCdXR0b24iLCJfcGxhY2VUaXRsZSIsIl9jYXJkTGlrZUNvdW50ZXIiLCJsaWtlcyIsInNvbWUiLCJlbCIsIl90ZXN0IiwiX2FkZGxpa2UiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsInNyYyIsImxpbmsiLCJhbHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX3RvZ2dsZUxpa2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0b2dnbGUiLCJjaGVja0xpa2VDb3VudGVyIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiVXNlckNhcmQiLCJpZHVzZXIiLCJjb2xiYWNrRGVsZXRlQ2FyZCIsIl9jb2xiYWNrRGVsZXRlQ2FyZCIsIl9kZWxldGVCdXR0b24iLCJjbG9uZUNhcmQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX3NlbGVjdG9yIiwiZm9yRWFjaCIsImFwcGVuZCIsIkZvcm1WYWxpZGF0b3IiLCJsaXN0U2VsZWN0b3IiLCJmb3JtRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5hY3RpdmVTdWJtaXRCdXR0b24iLCJfYWN0aXZlU3VibWl0QnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2lucHV0TGlzdCIsImlucHV0RWxlbWVudCIsIl9oaWRlSW5wdXRFcnJvciIsIl9saXN0U2VsZWN0b3IiLCJfZm9ybUVsZW1lbnQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWFzYWdlIiwiX2lucHV0RXJyb3IiLCJpbnB1dEVycm9yQ2xhc3MiLCJyZW1vdmUiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiX2lzVmFsaWQiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwic2VsZWN0b3IiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiY2xvc2UiLCJrZXkiLCJfcG9wdXBTZWxlY3RvciIsIl9jbG9zZUJ1dHRvbiIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfY2xvc2VCeUNsaWNrIiwiUG9wdXBXaXRoSW1hZ2UiLCJlbGVtZW50IiwiZnVsbFNjcmluIiwiZnVsbFNjcmluVGl0bGUiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Rm9ybdChb2xiYWNrIiwiX3N1Ym1pdEZvcm3QoW9sYmFjayIsIl90ZXh0QnV0dG9uIiwiX3RleHRCdXR0b25EZWZhdWx0IiwidmFsdWVMaXN0IiwidmFsdWUiLCJpc0xvYWRpbmciLCJpbm5lclRleHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJzaG93RG93bmxvYWRNZXNzYWdlIiwicmVzZXQiLCJVc2VySW5mbyIsIm5pY2tOYW1lU2VsZWN0b3IiLCJhYm91dE1lU2VsZWN0b3IiLCJfbmlja05hbWUiLCJfYWJvdXRNZSIsIl91c2VySW5mbyIsIlBvcHVwRGVsZXRlIiwiX2RhdGFDYXJkIiwiX2RlbGV0ZUNhcmQiLCJwb3B1cEF2YXRhciIsInBvcHVwUHJvZmlsZSIsInBvcHVwQ3JlYXRlQ2FyZCIsInBvcHVwRGVsZXRlQ2FyZCIsInBvcHVwRnVsbFNjcmVlbiIsImF2YXRhcklucHV0IiwiYWJvdXRNZUlucHV0Iiwibmlja05hbWVJbnB1dCIsImJ1dHRvbkFkZENhcmQiLCJidXR0b25DaGVuZ2VBdmF0YXIiLCJidXR0b25Qcm9maWxlRWRpdCIsImZvcm1DcmVhdGVDYXJkIiwiZm9ybVByb2ZpbGVFZGl0IiwiZm9ybUNoYW5nZUF2YXRhciIsImNhcmRMaXN0Iiwib3BlblBvcHVwRGVsZXRlQ2FyZCIsInBvcHVwRGVsZXRlIiwib3BlbiIsImNyZWF0ZUVsQ2FyZCIsInVzZXJJbmZvIiwiZ2V0SWRVc2VyIiwib3duZXIiLCJuZXdDYXJkIiwicG9wdXBXaXRoSW1hZ2UiLCJhcGkiLCJsaWtlQ2FyZCIsImNoZW5nZURhdGFMaWtlQ291bnRlciIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImRlbGV0ZUxpa2UiLCJjaGVja0xpa2VTdGF0dXMiLCJjcmVhdGVDYXJkIiwiYXV0aG9yaXphdGlvbiIsImRlbGV0ZUNhcmQiLCJmaW5hbGx5IiwiYXZhdGFyVmFsaWRhdG9yIiwicHJvZmlsZVZhbGlkYXRvciIsImNyZWF0ZUNhcmRWYWxpZGF0b3IiLCJwb3B1cFdpdGhQcm9maWxlIiwicGF0Y2hEYXRhVXNlciIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJwb3B1cFdpdGhDcmVhdGVDYXJkIiwicG9zdE5ld0NhcmQiLCJwcmVwZW5kIiwiYWRkTmV3Q2FyZCIsInBvcHVwQ2hhbmdlQXZhdGFyIiwicGF0Y2hBdmF0YXJVc2VyIiwic2hzaG93RG93bmxvYWRNZXNzYWdlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInJlc2V0VmFsaWRhdGlvbiIsInNldEV2ZW50TGlzdGVuZXJzIiwiZ2V0QWxsQ2FyZCIsInNlY3Rpb24iLCJhZGRJdGVtcyIsInJlbmRlckl0ZW1zIiwiZ2V0VXNlckRhdGEiXSwic291cmNlUm9vdCI6IiJ9