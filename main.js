(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=e.url,this._headers=e.headers}var n,r;return n=t,(r=[{key:"_check",value:function(e){return e.ok?e.json():Promise.reject("Извините произошла ошибка")}},{key:"getUserData",value:function(){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then(this._check)}},{key:"getAllCard",value:function(){return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then(this._check)}},{key:"postNewCard",value:function(e){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._check)}},{key:"patchDataUser",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._check)}},{key:"patchAvatarUser",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then(this._check)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._check)}},{key:"likeCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e._id,"/likes"),{method:"PUT",headers:this._headers,body:JSON.stringify(e)}).then(this._check)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e._id,"/likes"),{method:"DELETE",headers:this._headers}).then(this._check)}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r,o,i,c=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._idUser=n,this._data=t,this._handleCardClick=r,this._colbackLikeActive=o,this._colbackLikeDelete=i,this._cloneCard=e._templateCard.querySelector(".card").cloneNode(!0),this._plaseImg=this._cloneCard.querySelector(".card__image"),this._likeButton=this._cloneCard.querySelector(".card__like-button"),this._placeTitle=this._cloneCard.querySelector(".card__title"),this._cardLikeCounter=this._cloneCard.querySelector(".card__like-counter")}var t,r;return t=e,(r=[{key:"_test",value:function(){var e=this;return this._data.likes.some((function(t){return t._id===e._idUser}))}},{key:"checkLikeStatus",value:function(){this._test()&&this._addlike()}},{key:"checkLikeCounter",value:function(e){this._cardLikeCounter.textContent=e.likes.length}},{key:"chengeDataLikeCounter",value:function(e){this._data.likes=e.likes}},{key:"createCard",value:function(){return this._plaseImg.src=this._data.link,this._plaseImg.alt=this._data.name,this._placeTitle.textContent=this._data.name,this._setEventListeners(),this._cloneCard}},{key:"_setEventListeners",value:function(){var e=this;this._plaseImg.addEventListener("click",(function(){e._handleCardClick()})),this._likeButton.addEventListener("click",(function(){e._test()?(e._colbackLikeDelete(e._data),e._toggleLike()):(e._colbackLikeActive(e._data),e._toggleLike())}))}},{key:"_addlike",value:function(){this._likeButton.classList.add("card__like-button_active")}},{key:"_toggleLike",value:function(){this._likeButton.classList.toggle("card__like-button_active"),this.checkLikeCounter}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=s(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},l.apply(this,arguments)}function s(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}r=c,o="_templateCard",i=document.querySelector("#template-card").content,o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i;var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function c(e,t,n,r,o,u){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(a=i.call(this,e,t,n,r,o))._colbackDeleteCard=u,a._cloneCard=c._templateCard.querySelector(".card").cloneNode(!0),a._placeTitle=a._cloneCard.querySelector(".card__title"),a._plaseImg=a._cloneCard.querySelector(".card__image"),a._likeButton=a._cloneCard.querySelector(".card__like-button"),a._cardLikeCounter=a._cloneCard.querySelector(".card__like-counter"),a._deleteButton=a._cloneCard.querySelector(".card__delete-button"),a}return t=c,(n=[{key:"_setEventListeners",value:function(){var e=this;l(h(c.prototype),"_setEventListeners",this).call(this),this._deleteButton.addEventListener("click",(function(){e._colbackDeleteCard({id:e._data._id,cloneCard:e._cloneCard})}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(c);function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(d,"_templateCard",document.querySelector("#template-userCard").content);var _=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._selector=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){return e._renderer(t)}))}},{key:"addItems",value:function(e){this._selector.append(e)}}])&&y(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"_toggleButtonState",(function(){r._hasInvalidInput()?r._inactiveSubmitButton():r._activeSubmitButton()})),v(this,"resetValidation",(function(){r._toggleButtonState(),r._inputList.forEach((function(e){r._hideInputError(e)}))})),this._listSelector=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._listSelector.inputSelector)),this._submitButton=this._formElement.querySelector(this._listSelector.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){this._inputError=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.add(this._listSelector.inputErrorClass),this._inputError.textContent=t}},{key:"_hideInputError",value:function(e){this._inputError=this._formElement.querySelector(".".concat(e.id,"-error")),e.classList.remove(this._listSelector.inputErrorClass),this._inputError.textContent=""}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_inactiveSubmitButton",value:function(){this._submitButton.classList.add(this._listSelector.inactiveButtonClass),this._submitButton.setAttribute("disabled","disabled")}},{key:"_activeSubmitButton",value:function(){this._submitButton.classList.remove(this._listSelector.inactiveButtonClass),this._submitButton.removeAttribute("disabled")}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonState(t)}))}))}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"_closeByClick",(function(e){e.target.closest(".popup-content")||n.close()})),g(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close()})),this._popupSelector=t,this._closeButton=this._popupSelector.querySelector(".popup__close-button")}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupSelector.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._closeButton.addEventListener("click",(function(){e.close()})),this._popupSelector.addEventListener("click",this._closeByClick)}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=O(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},E.apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function L(e,t){return L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},L(e,t)}function j(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(r);if(o){var n=P(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,e)}return t=c,(n=[{key:"open",value:function(e){E(P(c.prototype),"open",this).call(this),c.fullScrin.src=e.link,c.fullScrin.alt=e.name,c.fullScrinTitle.textContent=e.name}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(w);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=T(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},I.apply(this,arguments)}function T(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function U(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}q(B,"fullScrin",document.querySelector(".popup__max-img")),q(B,"fullScrinTitle",document.querySelector(".popup__max-img-title"));var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return U(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e))._submitFormСolback=t,n._textButton=n._popupSelector.querySelector(".submit-button"),n._textButtonDefault=n._textButton.textContent,n._formElement=n._popupSelector.querySelector(".form"),n._inputList=Array.from(n._formElement.querySelectorAll(".form__input")),n}return t=c,(n=[{key:"_getInputValues",value:function(){var e=this;return this.valueList={},this._inputList.forEach((function(t){e.valueList[t.name]=t.value})),this.valueList}},{key:"showDownloadMessage",value:function(e){this._textButton.innerText=e?"Сохранение...":this._textButtonDefault}},{key:"setEventListeners",value:function(){var e=this;I(A(c.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault();var n=e._getInputValues();e.showDownloadMessage(!0),e._submitFormСolback(n)}))}},{key:"close",value:function(){I(A(c.prototype),"close",this).call(this),this._formElement.reset()}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(w);function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nickName=document.querySelector(t),this._aboutMe=document.querySelector(n),this._userInfo={}}var t,n;return t=e,(n=[{key:"setUserInfo",value:function(t){this._nickName.textContent=t.name,this._aboutMe.textContent=t.about,e.avatar.src=t.avatar,this._userInfo=t}},{key:"getUserInfo",value:function(){return this._userInfo}},{key:"getIdUser",value:function(){return this._userInfo._id}}])&&M(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(){return G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=H(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},G.apply(this,arguments)}function H(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=W(e)););return e}function z(e,t){return z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},z(e,t)}function K(e,t){if(t&&("object"===J(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(N,"avatar",document.querySelector(".profile__avatar"));var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=W(r);if(o){var n=W(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return K(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Q(n=i.call(this,e)),"_deleteCard",(function(){n._dataCard.cloneCard.remove(),n._dataCard.cloneCard=null})),n._dataCard={},n._colbackDeleteCard=t,n._closeButton=n._popupSelector.querySelector(".popup__close-button"),n._formElement=n._popupSelector.querySelector(".form"),n}return t=c,(n=[{key:"open",value:function(e){return this._dataCard={id:e.id,cloneCard:e.cloneCard},G(W(c.prototype),"open",this).call(this),this._dataCard}},{key:"setEventListeners",value:function(){var e=this;G(W(c.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e.showDownloadMessage(!0),e._colbackDeleteCard(e._dataCard.id,e._deleteCard)}))}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(V),Y={inputSelector:".form__input",submitButtonSelector:".submit-button",inactiveButtonClass:"form__submit_inactive",inputErrorClass:"form__input_type_error"},Z=document.querySelector("#avatar"),$=document.querySelector("#profile"),ee=document.querySelector("#create-card"),te=document.querySelector("#delete-card"),ne=document.querySelector(".popup_type_max-img"),re=document.querySelector("#avatar-input"),oe=document.querySelector("#about-input"),ie=document.querySelector("#name-input"),ce=document.querySelector(".profile__add-photo"),ue=document.querySelector(".profile__edit-avatar"),ae=document.querySelector(".profile__edit"),le=document.querySelector("#form-create"),se=document.querySelector("#profile-edit"),fe=document.querySelector("#cheng-avatar"),pe=document.querySelector("#card-list");function he(e){be.open(e)}function de(e){var t=_e.getIdUser();if(e.owner._id===t){var n=new d(e,t,(function(){return ve.open(e)}),(function(e){ye.likeCard(e).then((function(e){n.chengeDataLikeCounter(e),n.checkLikeCounter(e)})).catch((function(e){return console.log(e)}))}),(function(e){ye.deleteLike(e).then((function(e){n.chengeDataLikeCounter(e),n.checkLikeCounter(e)})).catch((function(e){return console.log(e)}))}),he);return n.checkLikeStatus(),n.checkLikeCounter(e),n.createCard()}var r=new c(e,t,(function(){return ve.open(e)}),(function(e){ye.likeCard(e).then((function(e){r.chengeDataLikeCounter(e),r.checkLikeCounter(e)})).catch((function(e){return console.log(e)}))}),(function(e){ye.deleteLike(e).then((function(e){r.chengeDataLikeCounter(e),r.checkLikeCounter(e)})).catch((function(e){return console.log(e)}))}));return r.checkLikeStatus(),r.checkLikeCounter(e),r.createCard()}var ye=new t({url:"https://mesto.nomoreparties.co/v1/cohort-41",headers:{authorization:"9f932bbc-acd7-4dae-8249-c98552659f56","content-type":"application/json"}}),_e=new N(".profile__nick-name",".profile__profession"),be=new X(te,(function(e,t){ye.deleteCard(e).then((function(){be.close()})).catch((function(e){return console.log(e)})).finally((function(){return be.showDownloadMessage(!1)}))})),ve=new B(ne),me=new m(Y,fe),ke=new m(Y,se),ge=new m(Y,le),we=new V($,(function(e){ye.patchDataUser(e).then((function(e){_e.getUserInfo(),_e.setUserInfo(e),we.close()})).catch((function(e){return console.log(e)})).finally((function(){return we.showDownloadMessage(!1)}))})),Se=new V(ee,(function(e){ye.postNewCard(e).then((function(e){!function(e){pe.prepend(de(e))}(e),Se.close()})).catch((function(e){return console.log(e)})).finally((function(){return Se.showDownloadMessage(!1)}))})),Ce=new V(Z,(function(e){ye.patchAvatarUser(e).then((function(e){_e.getUserInfo(),_e.setUserInfo(e),Ce.close()})).catch((function(e){console.log(e)})).finally((function(){return Ce.shshowDownloadMessage(!1)}))}));me.enableValidation(),ke.enableValidation(),ge.enableValidation(),ce.addEventListener("click",(function(){Se.open(),ge.resetValidation()})),ae.addEventListener("click",(function(){return e=_e.getUserInfo(),ie.value=e.name,oe.value=e.about,we.open(),void ke.resetValidation();var e})),ue.addEventListener("click",(function(){return e=_e.getUserInfo(),re.value=e.avatar,Ce.open(),void me.resetValidation();var e})),be.setEventListeners(),ve.setEventListeners(),we.setEventListeners(),Ce.setEventListeners(),Se.setEventListeners(),ye.getAllCard().then((function(e){var t=new _({items:e,renderer:function(e){t.addItems(de(e))}},pe);t.renderItems()})).catch((function(e){console.log(e)})),ye.getUserData().then((function(e){_e.setUserInfo(e)})).catch((function(e){console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VyQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBEZWxldGUuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvc2NyaXB0cy9jb25zdGFudHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgICAgICB0aGlzLl91cmwgPSBjb25maWcudXJsO1xyXG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSBjb25maWcuaGVhZGVycztcclxuICAgIH1cclxuICAgIF9jaGVjayhyZXMpe1xyXG4gICAgICAgIGlmKHJlcy5vayl7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCfQmNC30LLQuNC90LjRgtC1INC/0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAnKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldFVzZXJEYXRhKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIH0pLnRoZW4odGhpcy5fY2hlY2spO1xyXG4gICAgfVxyXG4gICAgZ2V0QWxsQ2FyZCgpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICB9KS50aGVuKHRoaXMuX2NoZWNrKTtcclxuICAgIH1cclxuICAgIHBvc3ROZXdDYXJkKGRhdGEpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgICAgICB9KS50aGVuKHRoaXMuX2NoZWNrKTtcclxuICAgIH1cclxuICAgIHBhdGNoRGF0YVVzZXIoZGF0YSl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KS50aGVuKHRoaXMuX2NoZWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBwYXRjaEF2YXRhclVzZXIoZGF0YSl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KS50aGVuKHRoaXMuX2NoZWNrKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZGVsZXRlQ2FyZChpZCl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtpZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgfSkudGhlbih0aGlzLl9jaGVjayk7XHJcbiAgICB9XHJcblxyXG4gICAgbGlrZUNhcmQoZGF0YSl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtkYXRhLl9pZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXHJcbiAgICAgICAgfSkudGhlbih0aGlzLl9jaGVjayk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlTGlrZShkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtkYXRhLl9pZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgfSkudGhlbih0aGlzLl9jaGVjayk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICAgIHN0YXRpYyBfdGVtcGxhdGVDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RlbXBsYXRlLWNhcmQnKS5jb250ZW50O1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgaWRVc2VyLCBoYW5kbGVDYXJkQ2xpY2ssIGNvbGJhY2tMaWtlQWN0aXZlLCBjb2xiYWNrTGlrZURlbGV0ZSkge1xyXG4gICAgICAgIHRoaXMuX2lkVXNlciA9IGlkVXNlcjtcclxuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICAgICAgdGhpcy5fY29sYmFja0xpa2VBY3RpdmUgPSBjb2xiYWNrTGlrZUFjdGl2ZTtcclxuICAgICAgICB0aGlzLl9jb2xiYWNrTGlrZURlbGV0ZSA9IGNvbGJhY2tMaWtlRGVsZXRlO1xyXG4gICAgICAgIHRoaXMuX2Nsb25lQ2FyZCA9IENhcmQuX3RlbXBsYXRlQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICB0aGlzLl9wbGFzZUltZyA9IHRoaXMuX2Nsb25lQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fY2xvbmVDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWJ1dHRvbicpO1xyXG4gICAgICAgIHRoaXMuX3BsYWNlVGl0bGUgPSB0aGlzLl9jbG9uZUNhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RpdGxlJyk7XHJcbiAgICAgICAgdGhpcy5fY2FyZExpa2VDb3VudGVyID0gdGhpcy5fY2xvbmVDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50ZXInKTtcclxuXHJcbiAgICB9O1xyXG4gICAgX3Rlc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGEubGlrZXMuc29tZSgoZWwpID0+IGVsLl9pZCA9PT0gdGhpcy5faWRVc2VyKTtcclxuICAgIH1cclxuICAgIGNoZWNrTGlrZVN0YXR1cygpIHtcclxuICAgICAgICBpZih0aGlzLl90ZXN0KCkpe1xyXG4gICAgICAgICAgICB0aGlzLl9hZGRsaWtlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2hlY2tMaWtlQ291bnRlciAoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRMaWtlQ291bnRlci50ZXh0Q29udGVudCA9IGRhdGEubGlrZXMubGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgY2hlbmdlRGF0YUxpa2VDb3VudGVyKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9kYXRhLmxpa2VzID0gZGF0YS5saWtlcztcclxuICAgIH1cclxuICAgIGNyZWF0ZUNhcmQgKCkge1xyXG4gICAgICAgIHRoaXMuX3BsYXNlSW1nLnNyYyA9IHRoaXMuX2RhdGEubGluaztcclxuICAgICAgICB0aGlzLl9wbGFzZUltZy5hbHQgPSB0aGlzLl9kYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fcGxhY2VUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jbG9uZUNhcmQ7XHJcbiAgICB9O1xyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX3BsYXNlSW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZighdGhpcy5fdGVzdCgpKXtcclxuICAgICAgICAgICAgdGhpcy5fY29sYmFja0xpa2VBY3RpdmUodGhpcy5fZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUxpa2UoKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5fY29sYmFja0xpa2VEZWxldGUodGhpcy5fZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUxpa2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfYWRkbGlrZSgpIHtcclxuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xyXG4gICAgfTtcclxuICAgIF90b2dnbGVMaWtlKCkge1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJyk7XHJcbiAgICAgICAgdGhpcy5jaGVja0xpa2VDb3VudGVyXHJcbiAgICB9O1xyXG59OyIsImltcG9ydCBDYXJkIGZyb20gXCIuL0NhcmQuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJDYXJkIGV4dGVuZHMgQ2FyZHtcclxuICAgIHN0YXRpYyBfdGVtcGxhdGVDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RlbXBsYXRlLXVzZXJDYXJkJykuY29udGVudDtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIGlkdXNlciwgaGFuZGxlQ2FyZENsaWNrLCBjb2xiYWNrTGlrZUFjdGl2ZSwgY29sYmFja0xpa2VEZWxldGUsIGNvbGJhY2tEZWxldGVDYXJkKSB7XHJcbiAgICAgICAgc3VwZXIgKGRhdGEsIGlkdXNlciwgaGFuZGxlQ2FyZENsaWNrLCBjb2xiYWNrTGlrZUFjdGl2ZSwgY29sYmFja0xpa2VEZWxldGUpO1xyXG4gICAgICAgIHRoaXMuX2NvbGJhY2tEZWxldGVDYXJkID0gY29sYmFja0RlbGV0ZUNhcmQ7XHJcbiAgICAgICAgdGhpcy5fY2xvbmVDYXJkID0gVXNlckNhcmQuX3RlbXBsYXRlQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICB0aGlzLl9wbGFjZVRpdGxlID0gdGhpcy5fY2xvbmVDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpO1xyXG4gICAgICAgIHRoaXMuX3BsYXNlSW1nID0gdGhpcy5fY2xvbmVDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jbG9uZUNhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtYnV0dG9uJyk7XHJcbiAgICAgICAgdGhpcy5fY2FyZExpa2VDb3VudGVyID0gdGhpcy5fY2xvbmVDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50ZXInKTtcclxuICAgICAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jbG9uZUNhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX2RlbGV0ZS1idXR0b24nKTtcclxuICAgIH07XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHN1cGVyLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fY29sYmFja0RlbGV0ZUNhcmQoe2lkOiB0aGlzLl9kYXRhLl9pZCwgY2xvbmVDYXJkOiB0aGlzLl9jbG9uZUNhcmR9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yICh7aXRlbXMsIHJlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3Ipe1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9zZWxlY3RvciA9IGNvbnRhaW5lclNlbGVjdG9yO1xyXG4gIH07XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoZWwpID0+IHRoaXMuX3JlbmRlcmVyKGVsKSk7XHJcbiAgfTtcclxuXHJcbiAgYWRkSXRlbXMoZWwpIHtcclxuICAgIHRoaXMuX3NlbGVjdG9yLmFwcGVuZChlbClcclxuICB9O1xyXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGxpc3RTZWxlY3RvciwgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2xpc3RTZWxlY3RvciA9IGxpc3RTZWxlY3RvclxyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudFxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2xpc3RTZWxlY3Rvci5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2xpc3RTZWxlY3Rvci5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfTtcclxuICBfaXNWYWxpZCAoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgX3Nob3dJbnB1dEVycm9yIChpbnB1dEVsZW1lbnQsIGVycm9yTWFzYWdlKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fbGlzdFNlbGVjdG9yLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yLnRleHRDb250ZW50ID0gZXJyb3JNYXNhZ2U7XHJcbiAgfTtcclxuICBfaGlkZUlucHV0RXJyb3IgKGlucHV0RWxlbWVudCl7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fbGlzdFNlbGVjdG9yLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yLnRleHRDb250ZW50ID0gJyc7XHJcbiAgfTtcclxuICBfaGFzSW52YWxpZElucHV0ICgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pXHJcbiAgfTtcclxuICBfaW5hY3RpdmVTdWJtaXRCdXR0b24gKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fbGlzdFNlbGVjdG9yLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICB9O1xyXG4gIF9hY3RpdmVTdWJtaXRCdXR0b24gKCl7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9saXN0U2VsZWN0b3IuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gIH07XHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2luYWN0aXZlU3VibWl0QnV0dG9uICgpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9hY3RpdmVTdWJtaXRCdXR0b24gKClcclxuICAgIH1cclxuICB9O1xyXG4gIF9zZXRFdmVudExpc3RlbmVycyAoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXRFbGVtZW50KVxyXG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbiAgfTtcclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT57XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfTtcclxuICByZXNldFZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvciAoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxufTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IgKHNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gc2VsZWN0b3I7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcclxuICB9XHJcblxyXG4gIF9jbG9zZUJ5Q2xpY2sgPSAoZWwpID0+IHtcclxuICAgIGlmICghZWwudGFyZ2V0LmNsb3Nlc3QoJy5wb3B1cC1jb250ZW50Jykpe1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gIH1cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZihldnQua2V5ID09PSAnRXNjYXBlJyl7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gIH1cclxuICB9XHJcbiAgb3BlbigpIHtcclxuICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKSA9PntcclxuICAgICAgdGhpcy5jbG9zZSgpXHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbG9zZUJ5Q2xpY2spO1xyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgc3RhdGljIGZ1bGxTY3JpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fbWF4LWltZycpO1xyXG4gIHN0YXRpYyBmdWxsU2NyaW5UaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fbWF4LWltZy10aXRsZScpO1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yKXtcclxuICAgIHN1cGVyIChzZWxlY3RvcilcclxuICB9XHJcbiAgb3BlbihlbGVtZW50KSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICBQb3B1cFdpdGhJbWFnZS5mdWxsU2NyaW4uc3JjID0gZWxlbWVudC5saW5rO1xyXG4gICAgUG9wdXBXaXRoSW1hZ2UuZnVsbFNjcmluLmFsdCA9IGVsZW1lbnQubmFtZTtcclxuICAgIFBvcHVwV2l0aEltYWdlLmZ1bGxTY3JpblRpdGxlLnRleHRDb250ZW50ID0gZWxlbWVudC5uYW1lO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvciAoc2VsZWN0b3IsIHN1Ym1pdEZvcm3QoW9sYmFjaykge1xyXG4gICAgICAgIHN1cGVyIChzZWxlY3RvcilcclxuICAgICAgICB0aGlzLl9zdWJtaXRGb3Jt0KFvbGJhY2sgPSBzdWJtaXRGb3Jt0KFvbGJhY2s7XHJcbiAgICAgICAgdGhpcy5fdGV4dEJ1dHRvbiA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnN1Ym1pdC1idXR0b24nKTtcclxuICAgICAgICB0aGlzLl90ZXh0QnV0dG9uRGVmYXVsdCA9IHRoaXMuX3RleHRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybV9faW5wdXQnKSlcclxuICAgIH1cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICB0aGlzLnZhbHVlTGlzdCA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChlbCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMudmFsdWVMaXN0W2VsLm5hbWVdID0gZWwudmFsdWVcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUxpc3Q7XHJcbiAgICB9XHJcbiAgICBzaG93RG93bmxvYWRNZXNzYWdlKGlzTG9hZGluZykge1xyXG4gICAgICAgIGlmKGlzTG9hZGluZyl7XHJcbiAgICAgICAgICB0aGlzLl90ZXh0QnV0dG9uLmlubmVyVGV4dCA9IFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIjtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgIHRoaXMuX3RleHRCdXR0b24uaW5uZXJUZXh0ID0gdGhpcy5fdGV4dEJ1dHRvbkRlZmF1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2dldElucHV0VmFsdWVzKClcclxuICAgICAgICAgICAgdGhpcy5zaG93RG93bmxvYWRNZXNzYWdlKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRGb3Jt0KFvbGJhY2soZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBzdGF0aWMgYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcicpXHJcblxyXG4gICAgY29uc3RydWN0b3Iobmlja05hbWVTZWxlY3RvciwgYWJvdXRNZVNlbGVjdG9yKXtcclxuICAgICAgICB0aGlzLl9uaWNrTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iobmlja05hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fYWJvdXRNZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRNZVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl91c2VySW5mbyA9IHt9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgICAgIHRoaXMuX25pY2tOYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2Fib3V0TWUudGV4dENvbnRlbnQgPSBkYXRhLmFib3V0O1xyXG4gICAgICAgIFVzZXJJbmZvLmF2YXRhci5zcmMgPSBkYXRhLmF2YXRhcjtcclxuICAgICAgICB0aGlzLl91c2VySW5mbyA9IGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckluZm8gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VySW5mbztcclxuICAgIH1cclxuICAgIGdldElkVXNlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckluZm8uX2lkO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBEZWxldGUgZXh0ZW5kcyBQb3B1cFdpdGhGb3JtIHtcclxuICAgIGNvbnN0cnVjdG9yIChzZWxlY3RvciwgY29sYmFja0RlbGV0ZUNhcmQpIHtcclxuICAgICAgICBzdXBlcihzZWxlY3RvcilcclxuICAgICAgICB0aGlzLl9kYXRhQ2FyZCA9e31cclxuICAgICAgICB0aGlzLl9jb2xiYWNrRGVsZXRlQ2FyZCA9IGNvbGJhY2tEZWxldGVDYXJkO1xyXG4gICAgICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xyXG4gICAgICB9XHJcbiAgICAgIG9wZW4oZGF0YSl7XHJcbiAgICAgICAgdGhpcy5fZGF0YUNhcmQgPSB7aWQ6IGRhdGEuaWQsIGNsb25lQ2FyZDogZGF0YS5jbG9uZUNhcmR9O1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGF0YUNhcmQ7XHJcbiAgICAgIH1cclxuICAgICAgX2RlbGV0ZUNhcmQgID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2RhdGFDYXJkLmNsb25lQ2FyZC5yZW1vdmUoKTtcclxuICAgICAgICB0aGlzLl9kYXRhQ2FyZC5jbG9uZUNhcmQgPSBudWxsO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBzZXRFdmVudExpc3RlbmVycygpe1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5zaG93RG93bmxvYWRNZXNzYWdlKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLl9jb2xiYWNrRGVsZXRlQ2FyZCh0aGlzLl9kYXRhQ2FyZC5pZCwgdGhpcy5fZGVsZXRlQ2FyZClcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG59IiwiZXhwb3J0IGNvbnN0IGxpc3RTZWxlY3RvciA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5zdWJtaXQtYnV0dG9uJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnZm9ybV9fc3VibWl0X2luYWN0aXZlJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dF90eXBlX2Vycm9yJyxcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhdmF0YXInKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9maWxlJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cENyZWF0ZUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3JlYXRlLWNhcmQnKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwRGVsZXRlQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZWxldGUtY2FyZCcpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBGdWxsU2NyZWVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfbWF4LWltZycpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFib3V0TWVTZWxlY3RvciA9ICcucHJvZmlsZV9fcHJvZmVzc2lvbic7XHJcbmV4cG9ydCBjb25zdCBuaWNrTmFtZVNlbGVjdG9yID0gJy5wcm9maWxlX19uaWNrLW5hbWUnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGF2YXRhcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2F2YXRhci1pbnB1dCcpO1xyXG5leHBvcnQgY29uc3QgYWJvdXRNZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Fib3V0LWlucHV0Jyk7XHJcbmV4cG9ydCBjb25zdCBuaWNrTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI25hbWUtaW5wdXQnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBidXR0b25BZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1waG90bycpO1xyXG5leHBvcnQgY29uc3QgYnV0dG9uQ2hlbmdlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYXZhdGFyJyk7XHJcbmV4cG9ydCBjb25zdCBidXR0b25Qcm9maWxlRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0Jyk7XHJcblxyXG5leHBvcnQgY29uc3QgZm9ybUNyZWF0ZUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybS1jcmVhdGUnKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1Qcm9maWxlRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9maWxlLWVkaXQnKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1DaGFuZ2VBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hlbmctYXZhdGFyJylcclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJkLWxpc3QnKTsiLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcclxuaW1wb3J0IEFwaSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzJztcclxuaW1wb3J0IENhcmQgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgVXNlckNhcmQgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1VzZXJDYXJkLmpzJztcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgUG9wdXBEZWxldGUgZnJvbSAnLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwRGVsZXRlLmpzJztcclxuaW1wb3J0IHtcclxuICBsaXN0U2VsZWN0b3IsXHJcbiAgYnV0dG9uQWRkQ2FyZCxcclxuICBidXR0b25DaGVuZ2VBdmF0YXIsXHJcbiAgYnV0dG9uUHJvZmlsZUVkaXQsXHJcblxyXG4gIHBvcHVwQXZhdGFyLFxyXG4gIHBvcHVwUHJvZmlsZSxcclxuICBwb3B1cERlbGV0ZUNhcmQsXHJcbiAgcG9wdXBDcmVhdGVDYXJkLFxyXG4gIHBvcHVwRnVsbFNjcmVlbixcclxuXHJcbiAgZm9ybUNyZWF0ZUNhcmQsXHJcbiAgZm9ybVByb2ZpbGVFZGl0LFxyXG4gIGZvcm1DaGFuZ2VBdmF0YXIsXHJcblxyXG4gIGNhcmRMaXN0LFxyXG5cclxuICBhYm91dE1lU2VsZWN0b3IsXHJcbiAgbmlja05hbWVTZWxlY3RvcixcclxuXHJcbiAgYXZhdGFySW5wdXQsXHJcbiAgYWJvdXRNZUlucHV0LFxyXG4gIG5pY2tOYW1lSW5wdXQsXHJcbn0gZnJvbSAnLi4vc2NyaXB0cy9jb25zdGFudHMvY29uc3RhbnRzLmpzJztcclxuXHJcbmZ1bmN0aW9uIG9wZW5Qb3B1cERlbGV0ZUNhcmQgKGRhdGEpIHtcclxuICBwb3B1cERlbGV0ZS5vcGVuKGRhdGEpXHJcbn07XHJcblxyXG5mdW5jdGlvbiBvcGVuUG9wdXBQcm9maWxlIChkYXRhKSB7XHJcbiAgbmlja05hbWVJbnB1dC52YWx1ZSA9IGRhdGEubmFtZTtcclxuICBhYm91dE1lSW5wdXQudmFsdWUgPSBkYXRhLmFib3V0O1xyXG4gIHBvcHVwV2l0aFByb2ZpbGUub3BlbigpO1xyXG4gIHByb2ZpbGVWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBvcGVuUG9wdXBDcmVhdGVDYXJkICgpIHtcclxuICBwb3B1cFdpdGhDcmVhdGVDYXJkLm9wZW4oKTtcclxuICBjcmVhdGVDYXJkVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gb3BlblBvcHVwQ2hhbmdlQXZhdGFyIChkYXRhKSB7XHJcbiAgYXZhdGFySW5wdXQudmFsdWUgPSBkYXRhLmF2YXRhcjtcclxuICBwb3B1cENoYW5nZUF2YXRhci5vcGVuKCk7XHJcbiAgYXZhdGFyVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFbENhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGlkVXNlciA9IHVzZXJJbmZvLmdldElkVXNlcigpO1xyXG4gIGlmIChkYXRhLm93bmVyLl9pZCA9PT0gaWRVc2VyKXtcclxuICAgIGNvbnN0IG5ld0NhcmQgPSBuZXcgVXNlckNhcmQgKFxyXG4gICAgICBkYXRhLFxyXG4gICAgICBpZFVzZXIsXHJcbiAgICAgICgpID0+IHBvcHVwV2l0aEltYWdlLm9wZW4oZGF0YSksLy9oYW5kbGVDYXJkQ2xpY2tcclxuICAgICAgKGRhdGEpID0+IHtcclxuICAgICAgICBhcGkubGlrZUNhcmQoZGF0YSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBuZXdDYXJkLmNoZW5nZURhdGFMaWtlQ291bnRlcihyZXMpO1xyXG4gICAgICAgICAgbmV3Q2FyZC5jaGVja0xpa2VDb3VudGVyKHJlcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgICAgfSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbGJhY2tMaWtlQWN0aXZlXHJcbiAgICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgYXBpLmRlbGV0ZUxpa2UoZGF0YSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBuZXdDYXJkLmNoZW5nZURhdGFMaWtlQ291bnRlcihyZXMpO1xyXG4gICAgICAgICAgbmV3Q2FyZC5jaGVja0xpa2VDb3VudGVyKHJlcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgICAgfSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbGJhY2tMaWtlRGVsZXRlXHJcbiAgICAgIG9wZW5Qb3B1cERlbGV0ZUNhcmQsXHJcbiAgICApO1xyXG4gICAgbmV3Q2FyZC5jaGVja0xpa2VTdGF0dXMoKTtcclxuICAgIG5ld0NhcmQuY2hlY2tMaWtlQ291bnRlcihkYXRhKTtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3Q2FyZC5jcmVhdGVDYXJkKCkgO1xyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50XHJcbiAgfWVsc2V7XHJcbiAgICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQgKFxyXG4gICAgICBkYXRhLFxyXG4gICAgICBpZFVzZXIsXHJcbiAgICAgICgpID0+IHBvcHVwV2l0aEltYWdlLm9wZW4oZGF0YSksLy9oYW5kbGVDYXJkQ2xpY2tcclxuICAgICAgKGRhdGEpID0+IHtcclxuICAgICAgICBhcGkubGlrZUNhcmQoZGF0YSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBuZXdDYXJkLmNoZW5nZURhdGFMaWtlQ291bnRlcihyZXMpO1xyXG4gICAgICAgICAgbmV3Q2FyZC5jaGVja0xpa2VDb3VudGVyKHJlcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgICAgfSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbGJhY2tMaWtlQWN0aXZlXHJcbiAgICAgIChkYXRhKSA9PiB7XHJcbiAgICAgICAgYXBpLmRlbGV0ZUxpa2UoZGF0YSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBuZXdDYXJkLmNoZW5nZURhdGFMaWtlQ291bnRlcihyZXMpO1xyXG4gICAgICAgICAgbmV3Q2FyZC5jaGVja0xpa2VDb3VudGVyKHJlcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgICAgfSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbGJhY2tMaWtlRGVsZXRlXHJcbiAgICApO1xyXG4gICAgbmV3Q2FyZC5jaGVja0xpa2VTdGF0dXMoKTtcclxuICAgIG5ld0NhcmQuY2hlY2tMaWtlQ291bnRlcihkYXRhKTtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3Q2FyZC5jcmVhdGVDYXJkKCk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnRcclxuICB9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBhZGROZXdDYXJkIChkYXRhKSB7XHJcbiAgY2FyZExpc3QucHJlcGVuZChjcmVhdGVFbENhcmQoZGF0YSkpXHJcbn07XHJcblxyXG5mdW5jdGlvbiBzdWJtaXRDcmVhdGVDYXJkIChkYXRhKSB7XHJcbiAgYXBpLnBvc3ROZXdDYXJkKGRhdGEpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgYWRkTmV3Q2FyZChyZXMpXHJcbiAgICBwb3B1cFdpdGhDcmVhdGVDYXJkLmNsb3NlKClcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gIC5maW5hbGx5KCgpID0+IHBvcHVwV2l0aENyZWF0ZUNhcmQuc2hvd0Rvd25sb2FkTWVzc2FnZShmYWxzZSkpXHJcbn07XHJcblxyXG5mdW5jdGlvbiBzdWJtaXREZWxldGVDYXJkIChpZCwgbWV0aG9kKSB7XHJcbiAgYXBpLmRlbGV0ZUNhcmQoaWQpXHJcbiAgLnRoZW4oKCkgPT4ge1xyXG4gICAgbWV0aG9kO1xyXG4gICAgcG9wdXBEZWxldGUuY2xvc2UoKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gIC5maW5hbGx5KCgpID0+IHBvcHVwRGVsZXRlLnNob3dEb3dubG9hZE1lc3NhZ2UoZmFsc2UpKVxyXG59O1xyXG5cclxuZnVuY3Rpb24gc3VibWl0UHJvZmlsZSAoZGF0YSkge1xyXG4gIGFwaS5wYXRjaERhdGFVc2VyKGRhdGEpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcyk7XHJcbiAgICBwb3B1cFdpdGhQcm9maWxlLmNsb3NlKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAuZmluYWxseSgoKSA9PiBwb3B1cFdpdGhQcm9maWxlLnNob3dEb3dubG9hZE1lc3NhZ2UoZmFsc2UpKVxyXG59O1xyXG5cclxuZnVuY3Rpb24gc3VibWl0Q2hlbmdlQXZhdGFyIChkYXRhKSB7XHJcbiAgYXBpLnBhdGNoQXZhdGFyVXNlcihkYXRhKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMpO1xyXG4gICAgcG9wdXBDaGFuZ2VBdmF0YXIuY2xvc2UoKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgfSlcclxuICAuZmluYWxseSgoKSA9PiBwb3B1cENoYW5nZUF2YXRhci5zaHNob3dEb3dubG9hZE1lc3NhZ2UoZmFsc2UpKVxyXG59O1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSAoe1xyXG4gIHVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDEnLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246ICc5ZjkzMmJiYy1hY2Q3LTRkYWUtODI0OS1jOTg1NTI2NTlmNTYnLFxyXG4gICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICB9XHJcbn0pO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8obmlja05hbWVTZWxlY3RvciwgYWJvdXRNZVNlbGVjdG9yKTtcclxuY29uc3QgcG9wdXBEZWxldGUgPSBuZXcgUG9wdXBEZWxldGUgKHBvcHVwRGVsZXRlQ2FyZCwgc3VibWl0RGVsZXRlQ2FyZCk7XHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlIChwb3B1cEZ1bGxTY3JlZW4pO1xyXG5jb25zdCBhdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihsaXN0U2VsZWN0b3IsIGZvcm1DaGFuZ2VBdmF0YXIpO1xyXG5jb25zdCBwcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IgKGxpc3RTZWxlY3Rvcixmb3JtUHJvZmlsZUVkaXQpO1xyXG5jb25zdCBjcmVhdGVDYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IgKGxpc3RTZWxlY3Rvcixmb3JtQ3JlYXRlQ2FyZCk7XHJcbmNvbnN0IHBvcHVwV2l0aFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybSAocG9wdXBQcm9maWxlLCBzdWJtaXRQcm9maWxlKTtcclxuY29uc3QgcG9wdXBXaXRoQ3JlYXRlQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtIChwb3B1cENyZWF0ZUNhcmQsIHN1Ym1pdENyZWF0ZUNhcmQpO1xyXG5jb25zdCBwb3B1cENoYW5nZUF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtIChwb3B1cEF2YXRhcixzdWJtaXRDaGVuZ2VBdmF0YXIpO1xyXG5cclxuYXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxucHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNyZWF0ZUNhcmRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuYnV0dG9uQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsb3BlblBvcHVwQ3JlYXRlQ2FyZCk7XHJcbmJ1dHRvblByb2ZpbGVFZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKSA9PiBvcGVuUG9wdXBQcm9maWxlKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpKTtcclxuYnV0dG9uQ2hlbmdlQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoKSA9PiBvcGVuUG9wdXBDaGFuZ2VBdmF0YXIodXNlckluZm8uZ2V0VXNlckluZm8oKSkpO1xyXG5cclxucG9wdXBEZWxldGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBXaXRoUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cENoYW5nZUF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cFdpdGhDcmVhdGVDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5hcGkuZ2V0QWxsQ2FyZCgpXHJcbiAgLnRoZW4oKGRhdGEpID0+IHtcclxuICBjb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24gKHtcclxuICAgIGl0ZW1zOiBkYXRhLFxyXG4gICAgcmVuZGVyZXI6IChlbCkgPT4ge1xyXG4gICAgICBzZWN0aW9uLmFkZEl0ZW1zKGNyZWF0ZUVsQ2FyZChlbCkpXHJcbiAgICB9fSxcclxuICAgIGNhcmRMaXN0KTtcclxuICBzZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKVxyXG4gIH0pO1xyXG5cclxuYXBpLmdldFVzZXJEYXRhKClcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycilcclxuICB9KTsiXSwibmFtZXMiOlsiQXBpIiwiY29uZmlnIiwidGhpcyIsIl91cmwiLCJ1cmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0IiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiX2NoZWNrIiwiZGF0YSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZSIsImFib3V0IiwiYXZhdGFyIiwiaWQiLCJfaWQiLCJDYXJkIiwiaWRVc2VyIiwiaGFuZGxlQ2FyZENsaWNrIiwiY29sYmFja0xpa2VBY3RpdmUiLCJjb2xiYWNrTGlrZURlbGV0ZSIsIl9pZFVzZXIiLCJfZGF0YSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfY29sYmFja0xpa2VBY3RpdmUiLCJfY29sYmFja0xpa2VEZWxldGUiLCJfY2xvbmVDYXJkIiwiX3RlbXBsYXRlQ2FyZCIsInF1ZXJ5U2VsZWN0b3IiLCJjbG9uZU5vZGUiLCJfcGxhc2VJbWciLCJfbGlrZUJ1dHRvbiIsIl9wbGFjZVRpdGxlIiwiX2NhcmRMaWtlQ291bnRlciIsImxpa2VzIiwic29tZSIsImVsIiwiX3Rlc3QiLCJfYWRkbGlrZSIsInRleHRDb250ZW50IiwibGVuZ3RoIiwic3JjIiwibGluayIsImFsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdG9nZ2xlTGlrZSIsImNsYXNzTGlzdCIsImFkZCIsInRvZ2dsZSIsImNoZWNrTGlrZUNvdW50ZXIiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJVc2VyQ2FyZCIsImlkdXNlciIsImNvbGJhY2tEZWxldGVDYXJkIiwiX2NvbGJhY2tEZWxldGVDYXJkIiwiX2RlbGV0ZUJ1dHRvbiIsImNsb25lQ2FyZCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfc2VsZWN0b3IiLCJmb3JFYWNoIiwiYXBwZW5kIiwiRm9ybVZhbGlkYXRvciIsImxpc3RTZWxlY3RvciIsImZvcm1FbGVtZW50IiwiX2hhc0ludmFsaWRJbnB1dCIsIl9pbmFjdGl2ZVN1Ym1pdEJ1dHRvbiIsIl9hY3RpdmVTdWJtaXRCdXR0b24iLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5wdXRMaXN0IiwiaW5wdXRFbGVtZW50IiwiX2hpZGVJbnB1dEVycm9yIiwiX2xpc3RTZWxlY3RvciIsIl9mb3JtRWxlbWVudCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvbiIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JNYXNhZ2UiLCJfaW5wdXRFcnJvciIsImlucHV0RXJyb3JDbGFzcyIsInJlbW92ZSIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfaXNWYWxpZCIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiUG9wdXAiLCJzZWxlY3RvciIsInRhcmdldCIsImNsb3Nlc3QiLCJjbG9zZSIsImtleSIsIl9wb3B1cFNlbGVjdG9yIiwiX2Nsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9jbG9zZUJ5Q2xpY2siLCJQb3B1cFdpdGhJbWFnZSIsImVsZW1lbnQiLCJmdWxsU2NyaW4iLCJmdWxsU2NyaW5UaXRsZSIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3Jt0KFvbGJhY2siLCJfc3VibWl0Rm9ybdChb2xiYWNrIiwiX3RleHRCdXR0b24iLCJfdGV4dEJ1dHRvbkRlZmF1bHQiLCJ2YWx1ZUxpc3QiLCJ2YWx1ZSIsImlzTG9hZGluZyIsImlubmVyVGV4dCIsIl9nZXRJbnB1dFZhbHVlcyIsInNob3dEb3dubG9hZE1lc3NhZ2UiLCJyZXNldCIsIlVzZXJJbmZvIiwibmlja05hbWVTZWxlY3RvciIsImFib3V0TWVTZWxlY3RvciIsIl9uaWNrTmFtZSIsIl9hYm91dE1lIiwiX3VzZXJJbmZvIiwiUG9wdXBEZWxldGUiLCJfZGF0YUNhcmQiLCJfZGVsZXRlQ2FyZCIsInBvcHVwQXZhdGFyIiwicG9wdXBQcm9maWxlIiwicG9wdXBDcmVhdGVDYXJkIiwicG9wdXBEZWxldGVDYXJkIiwicG9wdXBGdWxsU2NyZWVuIiwiYXZhdGFySW5wdXQiLCJhYm91dE1lSW5wdXQiLCJuaWNrTmFtZUlucHV0IiwiYnV0dG9uQWRkQ2FyZCIsImJ1dHRvbkNoZW5nZUF2YXRhciIsImJ1dHRvblByb2ZpbGVFZGl0IiwiZm9ybUNyZWF0ZUNhcmQiLCJmb3JtUHJvZmlsZUVkaXQiLCJmb3JtQ2hhbmdlQXZhdGFyIiwiY2FyZExpc3QiLCJvcGVuUG9wdXBEZWxldGVDYXJkIiwicG9wdXBEZWxldGUiLCJvcGVuIiwiY3JlYXRlRWxDYXJkIiwidXNlckluZm8iLCJnZXRJZFVzZXIiLCJvd25lciIsIm5ld0NhcmQiLCJwb3B1cFdpdGhJbWFnZSIsImFwaSIsImxpa2VDYXJkIiwiY2hlbmdlRGF0YUxpa2VDb3VudGVyIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZGVsZXRlTGlrZSIsImNoZWNrTGlrZVN0YXR1cyIsImNyZWF0ZUNhcmQiLCJhdXRob3JpemF0aW9uIiwiZGVsZXRlQ2FyZCIsImZpbmFsbHkiLCJhdmF0YXJWYWxpZGF0b3IiLCJwcm9maWxlVmFsaWRhdG9yIiwiY3JlYXRlQ2FyZFZhbGlkYXRvciIsInBvcHVwV2l0aFByb2ZpbGUiLCJwYXRjaERhdGFVc2VyIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsInBvcHVwV2l0aENyZWF0ZUNhcmQiLCJwb3N0TmV3Q2FyZCIsInByZXBlbmQiLCJhZGROZXdDYXJkIiwicG9wdXBDaGFuZ2VBdmF0YXIiLCJwYXRjaEF2YXRhclVzZXIiLCJzaHNob3dEb3dubG9hZE1lc3NhZ2UiLCJlbmFibGVWYWxpZGF0aW9uIiwicmVzZXRWYWxpZGF0aW9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJnZXRBbGxDYXJkIiwic2VjdGlvbiIsImFkZEl0ZW1zIiwicmVuZGVySXRlbXMiLCJnZXRVc2VyRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=